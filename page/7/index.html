<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Donglin&#39;s Blog">
<meta property="og:url" content="http://iridescent.com.cn/page/7/index.html">
<meta property="og:site_name" content="Donglin&#39;s Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Donglin&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://iridescent.com.cn/page/7/"/>





  <title>Donglin's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Donglin's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/31/poj1185-e7-82-ae-e5-85-b5-e9-98-b5-e5-9c-b0-e7-8a-b6-e5-8e-8bdp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/31/poj1185-e7-82-ae-e5-85-b5-e9-98-b5-e5-9c-b0-e7-8a-b6-e5-8e-8bdp/" itemprop="url">poj1185炮兵阵地(状压dp)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-31T10:26:57+08:00">
                2016-03-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table border="0" width="100%"><br><tbody><br><tr><br><td><br><div class="ptt" lang="en-US">炮兵阵地</div><br><div class="plm"><br><table align="center"><br><tbody><br><tr><br><td><strong>Time Limit:</strong> 2000MS</td><br><td width="10px"></td><br><td><strong>Memory Limit:</strong> 65536K</td><br></tr><br><tr><br><td><strong>Total Submissions:</strong> 23412</td><br><td width="10px"></td><br><td><strong>Accepted:</strong> 9056</td><br></tr><br></tbody><br></table><br></div><br><br>Description<br><br><div class="ptx" lang="en-US">司令部的将军们打算在N<em>M的网格地图上部署他们的炮兵部队。一个N</em>M的地图由N行M列组成，地图的每一格可能是山地（用”H” 表示），也可能是平原（用”P”表示），如下图。在每一格平原地形上最多可以布置一支炮兵部队（山地上不能够部署炮兵部队）；一支炮兵部队在地图上的攻击范围如图中黑色区域所示：</div><br><div class="ptx" lang="en-US"><img src="https://iridescent.com.cn/wp-content/uploads/2016/03/poj1185.jpg" alt="poj1185"><br><center></center><br>如果在地图中的灰色所标识的平原上部署一支炮兵部队，则图中的黑色的网格表示它能够攻击到的区域：沿横向左右各两格，沿纵向上下各两格。图上其它白色网格均攻击不到。从图上可见炮兵的攻击范围不受地形的影响。<br>现在，将军们规划如何部署炮兵部队，在防止误伤的前提下（保证任何两支炮兵部队之间不能互相攻击，即任何一支炮兵部队都不在其他支炮兵部队的攻击范围内），在整个地图区域内最多能够摆放多少我军的炮兵部队。</div><br><br>Input<br><br><div class="ptx" lang="en-US">第一行包含两个由空格分割开的正整数，分别表示N和M；<br>接下来的N行，每一行含有连续的M个字符(‘P’或者’H’)，中间没有空格。按顺序表示地图中每一行的数据。N &lt;= 100；M &lt;= 10。</div><br><br>Output<br><br><div class="ptx" lang="en-US">仅一行，包含一个整数K，表示最多能摆放的炮兵部队的数量。</div><br><br>Sample Input<br><br><pre class="sio">5 4<br>PHPP<br>PPHH<br>PPPP<br>PHPP<br>PHHP</pre><br><br>Sample Output<br><br><pre class="sio">6</pre><br><br>Source<br><br><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=Noi+01" target="_blank" rel="noopener">Noi 01</a></div></td><br></tr><br></tbody><br></table>

<p><span style="color: #333399; font-size: medium;">[<a href="http://poj.org/submit?problem_id=1185" target="_blank" rel="noopener">Submit</a>]   [<a>Go Back</a>]   [<a href="http://poj.org/problemstatus?problem_id=1185" target="_blank" rel="noopener">Status</a>]   [<a href="http://poj.org/bbs?problem_id=1185" target="_blank" rel="noopener">Discuss</a>]</span></p>
<p>打表可发现，对于每一行最多有60种可能，先把所有的可能存到一个mask数组里，dp[i][j][k]表示当前是 第i行，当前行是第j种可能，上一行是第k种可能放的最大值</p>
<p>则</p>
<p>dp[l][i][j] = max(dp[l][i][j], dp[j - 1][j][k] + count_bits(mask[i]));</p>
<p>其中l表示当前行，i, j, k分别表示l行，l - 1行， l - 2行情况，转移条件</p>
<p>(mask[i] &amp; mask[j]) == 0</p>
<p>(mask[j] &amp; mask[k]) == 0</p>
<p>(mask[i] &amp; mask[k]) == 0</p>
<p>(mask[i] &amp; G[l]) == 0</p>
<p>(mask[j] &amp; G[l - 1]) == 0</p>
<p>(mask[k] &amp; G[l - 2]) == 0</p>
<p>G[i]的第j位如果为1表示第i行第j个空地不能放东西</p>
<p>AC代码：</p>
<p><pre class="lang:c++ decode:true " title="poj1185">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;assert.h&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>#define PB push_back<br>using namespace std;<br>typedef long long LL;<br>const int MAXN = 11;<br>const double pi = acos(-1.0);<br>const double eps = 1e-7;<br>const int INF = 0x3f3f3f3f;<br>const LL mod = 100000000;</p>
<p>int dp[110][70][70];<br>int G[110];<br>vector&lt;int&gt; mask;<br>char str[MAXN + 5];</p>
<p>inline int count_bits(int x){<br>    x = (x &amp; 0x55555555) + ((x &amp; 0xaaaaaaaa) &gt;&gt; 1);<br>    x = (x &amp; 0x33333333) + ((x &amp; 0xcccccccc) &gt;&gt; 2);<br>    x = (x &amp; 0x0f0f0f0f) + ((x &amp; 0xf0f0f0f0) &gt;&gt; 4);<br>    x = (x &amp; 0x00ff00ff) + ((x &amp; 0xff00ff00) &gt;&gt; 8);<br>    x = (x &amp; 0x0000ffff) + ((x &amp; 0xffff0000) &gt;&gt; 16);<br>    return x;<br>}</p>
<p>bool judge(int mask) {<br>    for(int i = 0 ; i &lt; 11 ; i++)<br>        if(((mask &amp; (1 &lt;&lt; i)) &amp;&amp; (mask &amp; (1 &lt;&lt; (i + 1)))) ||<br>           ((mask &amp; (1 &lt;&lt; i)) &amp;&amp; (mask &amp; (1 &lt;&lt; (i + 2)))) ||<br>           ((mask &amp; (1 &lt;&lt; (i + 1))) &amp;&amp; (mask &amp; (1 &lt;&lt; (i + 2))))<br>           ) return false;<br>    return true;<br>}</p>
<p>int main() {<br>    //freopen(“in.txt”, “r”, stdin);<br>    int n, m;<br>    while(scanf(“%d%d”, &amp;n, &amp;m) == 2) {<br>        mask.clear();<br>        memset(dp, 0, sizeof dp);<br>        memset(G, 0, sizeof G);<br>        for(int i = 0 ; i &lt; (1 &lt;&lt; m) ; i++)<br>            if(judge(i)) mask.push_back(i);</p>
<pre><code>    for(int i = 0 ; i &amp;lt; n ; i++) {
        scanf(&quot;%s&quot;, str);
        for(int j = 0 ; j &amp;lt; m ; j++)
            if(str[j] == &apos;H&apos;) G[i] |= (1 &amp;lt;&amp;lt; j);
    }

    for(int i = 0 ; i &amp;lt; (int)mask.size() ; i++)
        if(!(G[0] &amp;amp; mask[i]))
            dp[0][i][0] = count_bits(mask[i]);
    if(n &amp;gt; 1) {
        for(int i = 0 ; i &amp;lt; (int)mask.size() ; i++)
            for(int j = 0 ; j &amp;lt; (int)mask.size() ; j++)
                if(!(mask[i] &amp;amp; mask[j]) &amp;amp;&amp;amp; !(mask[i] &amp;amp; G[1]) &amp;amp;&amp;amp; !(mask[j] &amp;amp; G[0])) dp[1][i][j] = max(dp[1][i][j], dp[0][j][0] + count_bits(mask[i]));
    }

    for(int l = 2 ; l &amp;lt; n ; l++) {
        for(int i = 0 ; i &amp;lt; (int)mask.size() ; i++)
            for(int j = 0 ; j &amp;lt; (int)mask.size() ; j++)
                for(int k = 0 ; k &amp;lt; (int)mask.size() ; k++) {
                    if((mask[i] &amp;amp; mask[j]) || (mask[j] &amp;amp; mask[k]) || (mask[i] &amp;amp; mask[k])) continue;
                    if((mask[i] &amp;amp; G[l]) || (mask[j] &amp;amp; G[l - 1]) || mask[k] &amp;amp; G[l - 2]) continue;
                    dp[l][i][j] = max(dp[l][i][j], dp[l - 1][j][k] + count_bits(mask[i]));
                }
    }

    int ans = 0;
    for(int i = 0 ; i &amp;lt; (int)mask.size() ; i++)
        for(int j = 0 ; j &amp;lt; (int)mask.size() ; j++)
            ans = max(ans, dp[n - 1][i][j]);
    printf(&quot;%d\n&quot;, ans);
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/28/e8-bd-acacm-e5-8d-9a-e5-bc-88-e7-9f-a5-e8-af-86-e6-b1-87-e6-80-bb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/28/e8-bd-acacm-e5-8d-9a-e5-bc-88-e7-9f-a5-e8-af-86-e6-b1-87-e6-80-bb/" itemprop="url">[转]ACM博弈知识汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-28T21:53:09+08:00">
                2016-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有一种很有意思的游戏，就是有物体若干堆，可以是火柴棍或是围棋子等等均可。两个人轮流从堆中取物体若干，规定最后取光物体者取胜。这是我国民间很古老的一个游戏，别看这游戏极其简单，却蕴含着深刻的数学原理。下面我们来分析一下要如何才能够取胜。</p>
<p>（一）<strong>巴什博奕（Bash Game）：</strong></p>
<p>只有一堆n个物品，两个人轮流从这堆物品中取物，规定每次至少取一个，最多取m个。最后取光者得胜。</p>
<p>显然，如果n=m+1，那么由于一次最多只能取m个，所以，无论先取者拿走多少个，后取者都能够一次拿走剩余的物品，后者取胜。因此我们发现了如何取胜的法则：如果n=（m+1）r+s，（r为任意自然数，s≤m),那么先取者要拿走s个物品，如果后取者拿走k（≤m)个，那么先取者再拿走m+1-k个，结果剩下（m+1）（r-1）个，以后保持这样的取法，那么先取者肯定获胜。总之，要保持给对手留下（m+1）的倍数，就能最后获胜。这个游戏还可以有一种变相的玩法：两个人轮流报数，每次至少报一个，最多报十个，谁能报到100者胜。</p>
<p>（二）<strong>威佐夫博奕（Wythoff Game）：</strong></p>
<p>有两堆各若干个物品，两个人轮流从某一堆或同时从两堆中取同样多的物品，规定每次至少取一个，多者不限，最后取光者得胜。</p>
<p>这种情况下是颇为复杂的。我们用（ak，bk）（ak ≤ bk ,k=0，1，2，…,n)表示两堆物品的数量并称其为<strong>局势</strong>，如果甲面对（0，0），那么甲已经输了，这种局势我们称为<strong>奇异局势</strong>。前几个奇异局势是：（0，0）、（1，2）、（3，5）、（4，7）、（6，10）、（8，13）、（9，15）、（11，18）、（12，20）。</p>
<p>可以看出,a0=b0=0,ak是未在前面出现过的最小自然数,而 bk= ak + k，奇异局势有如下三条性质：</p>
<ol>
<li>任何自然数都包含在一个且仅有一个奇异局势中。由于ak是未在前面出现过的最小自然数，所以有ak &gt; ak-1 ，而 bk= ak + k &gt; ak-1 + k-1 = bk-1 &gt; ak-1 。所以性质1。成立。</li>
<li>任意操作都可将奇异局势变为非奇异局势。事实上，若只改变奇异局势（ak，bk）的某一个分量，那么另一个分量不可能在其他奇异局势中，所以必然是非奇异局势。如果使（ak，bk）的两个分量同时减少，则由于其差不变，且不可能是其他奇异局势的差，因此也是非奇异局势。</li>
<li>采用适当的方法，可以将非奇异局势变为奇异局势。<br>假设面对的局势是（a,b），若 b = a，则同时从两堆中取走 a 个物体，就变为了奇异局势（0，0）；如果a = ak ，b &gt; bk，那么，取走b  – bk个物体，即变为奇异局势；如果 a = ak ，  b &lt; bk ,则同时从两堆中拿走 ak – ab + ak个物体,变为奇异局势（ ab – ak , ab – ak+ b – ak）；如果a &gt; ak ，b= ak + k,则从第一堆中拿走多余的数量a – ak 即可；如果a &lt; ak ，b= ak + k,分两种情况，第一种，a=aj （j &lt; k）,从第二堆里面拿走 b – bj 即可；第二种，a=bj （j &lt; k）,从第二堆里面拿走 b – aj 即可。</li>
</ol>
<p>从如上性质可知，两个人如果都采用正确操作，那么面对非奇异局势，先拿者必胜；反之，则后拿者取胜。</p>
<p>那么任给一个局势（a，b），怎样判断它是不是奇异局势呢？我们有如下公式：</p>
<p>ak =[k（1+√5）/2]，bk= ak + k  （k=0，1，2，…,n 方括号表示取整函数)</p>
<p>奇妙的是其中出现了黄金分割数（1+√5）/2 = 1。618…,因此,由ak，bk组成的矩形近似为黄金矩形，由于2/（1+√5）=（√5-1）/2，可以先求出j=[a（√5-1）/2]，若a=[j（1+√5）/2]，那么a = aj，bj = aj + j，若不等于，那么a = aj+1，bj+1 = aj+1+ j + 1，若都不是，那么就不是奇异局势。然后再按照上述法则进行，一定会遇到奇异局势。</p>
<p>（三）<strong>尼姆博奕（Nimm Game）：</strong></p>
<p>有三堆各若干个物品，两个人轮流从某一堆取任意多的物品，规定每次至少取一个，多者不限，最后取光者得胜。</p>
<p>这种情况最有意思，它与二进制有密切关系，我们用（a，b，c）表示某种局势，首先（0，0，0）显然是奇异局势，无论谁面对奇异局势，都必然失败。第二种奇异局势是（0，n，n），只要与对手拿走一样多的物品，最后都将导致（0，0，0）。仔细分析一下，（1，2，3）也是奇异局势，无论对手如何拿，接下来都可以变为（0，n，n）的情<br>形。</p>
<p>计算机算法里面有一种叫做按位模2加，也叫做异或的运算，我们用符号（+）表示这种运算。这种运算和一般加法不同的一点是1+1=0。先看（1，2，3）的按位模2加的结果：</p>
<p>1 =二进制01<br>2 =二进制10<br>3 =二进制11 （+）<br>———————<br>0 =二进制00 （注意不进位）</p>
<p>对于奇异局势（0，n，n）也一样，结果也是0。</p>
<p>任何奇异局势（a，b，c）都有a（+）b（+）c =0。</p>
<p>如果我们面对的是一个非奇异局势（a，b，c），要如何变为奇异局势呢？假设 a &lt; b&lt; c,我们只要将 c 变为 a（+）b,即可,因为有如下的运算结果: a（+）b（+）(a（+）b)=(a（+）a)（+）(b（+）b)=0（+）0=0。要将c 变为a（+）b，只要从 c中减去 c-（a（+）b）即可。</p>
<p>例1。（14，21，39），14（+）21=27，39-27=12，所以从39中拿走12个物体即可达到奇异局势（14，21，27）。</p>
<p>例2。（55，81，121），55（+）81=102，121-102=19，所以从121中拿走19个物品就形成了奇异局势（55，81，102）。</p>
<p>例3。（29，45，58），29（+）45=48，58-48=10，从58中拿走10个，变为（29，45，48）。</p>
<p>例4。我们来实际进行一盘比赛看看：<br>甲:(7,8,9)-&gt;(1,8,9)奇异局势<br>乙:(1,8,9)-&gt;(1,8,4)<br>甲:(1,8,4)-&gt;(1,5,4)奇异局势<br>乙:(1,5,4)-&gt;(1,4,4)<br>甲:(1,4,4)-&gt;(0,4,4)奇异局势<br>乙:(0,4,4)-&gt;(0,4,2)<br>甲:(0.4,2)-&gt;(0,2,2)奇异局势<br>乙:(0,2,2)-&gt;(0,2,1)<br>甲:(0,2,1)-&gt;(0,1,1)奇异局势<br>乙:(0,1,1)-&gt;(0,1,0)<br>甲:(0,1,0)-&gt;(0,0,0)奇异局势<br>甲胜。</p>
<p>取火柴的游戏<br>题目1：今有若干堆火柴，两人依次从中拿取，规定每次只能从一堆中取若干根，可将一堆全取走，但不可不取，最后取完者为胜，求必胜的方法。<br>题目2：今有若干堆火柴，两人依次从中拿取，规定每次只能从一堆中取若干根，可将一堆全取走，但不可不取，最后取完者为负，求必胜的方法。<br>嘿嘿，这个游戏我早就见识过了。小时候用珠算玩这个游戏：第一档拨一个，第二档拨两个，依次直到第五档拨五个。然后两个人就轮流再把棋子拨下来，谁要是最后一个拨谁就赢。有一次暑假看见两个小孩子在玩这个游戏，我就在想有没有一个定论呢。下面就来试着证明一下吧<br>先解决第一个问题吧。<br>定义：若所有火柴数异或为0，则该状态被称为利他态，用字母T表示；否则，为利己态，用S表示。<br>[定理1]：</p>
<p>对于任何一个S态，总能从一堆火柴中取出若干个使之成为T态。<br>证明：<br>若有n堆火柴，每堆火柴有A(i)根火柴数，那么既然现在处于S态，<br>c = A(1) xor A(2) xor … xor A(n) &gt; 0;<br>把c表示成二进制，记它的二进制数的最高位为第p位，则必然存在一个A(t),它二进制的第p位也是1。（否则，若所有的A(i)的第p位都是0，这与c的第p位就也为0矛盾）。<br>那么我们把x = A(t) xor c,则得到x &lt; A(t).这是因为既然A(t)的第p位与c的第p位同为1,那么x的第p位变为0,而高于p的位并没有改变。所以x &lt; A(t).而<br>A(1) xor A(2) xor … xor x xor … xor A(n)<br>= A(1) xor A(2) xor … xor A(t) xor c xor … xor A(n)<br>= A(1) xor A(2) xor… xor A(n) xor A(1) xor A(2) xor … xor A(n)<br>= 0<br>这就是说从A(t)堆中取出 A(t) – x 根火柴后状态就会从S态变为T态。证毕<br>[定理2]：</p>
<p>T态，取任何一堆的若干根，都将成为S态。<br>证明：用反证法试试。<br>若<br>c = A(1) xor A(2) xor … xor A(i) xor … xor A(n) = 0；<br>c’ = A(1) xor A(2) xor … xor A(i’) xor c xor … xor A(n) = 0;<br>则有<br>c xor c’ = A(1) xor A(2) xor … xor A(i) xor … xor A(n) xor A(1) xor A(2) xor … xor A(i’) xor c xor … xor A(n) = A(i) xor A(i’) =0<br>进而推出A(i) = A(i’)，这与已知矛盾。所以命题得证。<br>[定理 3]：</p>
<p>S态，只要方法正确，必赢。<br>最终胜利即由S态转变为T态，任何一个S态，只要把它变为T态，（由定理1，可以把它变成T态。）对方只能把T态转变为S态(定理2)。这样，所有S态向T态的转变都可以有己方控制，对方只能被动地实现由T态转变为S态。故S态必赢。<br>[定理4]：</p>
<p>T态，只要对方法正确，必败。<br>由定理3易得。<br>接着来解决第二个问题。<br>定义：若一堆中仅有1根火柴，则被称为孤单堆。若大于1根，则称为充裕堆。<br>定义：T态中，若充裕堆的堆数大于等于2，则称为完全利他态，用T2表示；若充裕堆的堆数等于0，则称为部分利他态，用T0表示。</p>
<p>孤单堆的根数异或只会影响二进制的最后一位，但充裕堆会影响高位（非最后一位）。一个充裕堆，高位必有一位不为0，则所有根数异或不为0。故不会是T态。<br>[定理5]：</p>
<p>S0态，即仅有奇数个孤单堆，必败。T0态必胜。<br>证明：<br>S0态，其实就是每次只能取一根。每次第奇数根都由己取，第偶数根都由对<br>方取，所以最后一根必己取。败。同理,  T0态必胜#<br>[定理6]：</p>
<p>S1态，只要方法正确，必胜。<br>证明：<br>若此时孤单堆堆数为奇数，把充裕堆取完；否则，取成一根。这样，就变成奇数个孤单堆，由对方取。由定理5，对方必输。己必胜。  #<br>[定理7]：</p>
<p>S2态不可转一次变为T0态。<br>证明：<br>充裕堆数不可能一次由2变为0。得证。  #</p>
<p>[定理8]：</p>
<p>S2态可一次转变为T2态。<br>证明：<br>由定理1，S态可转变为T态，态可一次转变为T态，又由定理6，S2态不可转一次变为T0态，所以转变的T态为T2态。  #<br>[定理9]：</p>
<p>T2态，只能转变为S2态或S1态。<br>证明：<br>由定理2，T态必然变为S态。由于充裕堆数不可能一次由2变为0，所以此时的S态不可能为S0态。命题得证。<br>[定理10]：</p>
<p>S2态，只要方法正确，必胜.<br>证明：<br>方法如下：<br>1）  S2态，就把它变为T2态。（由定理8）<br>2）  对方只能T2转变成S2态或S1态（定理9）<br>若转变为S2,  转向1）<br>若转变为S1,  这己必胜。（定理5）<br>[定理11]：</p>
<p>T2态必输。<br>证明：同10。<br>综上所述，必输态有：  T2,S0<br>必胜态：    S2,S1,T0.<br>两题比较：<br>第一题的全过程其实如下：<br>S2-&gt;T2-&gt;S2-&gt;T2-&gt;  ……  -&gt;T2-&gt;S1-&gt;T0-&gt;S0-&gt;T0-&gt;……-&gt;S0-&gt;T0(全0)<br>第二题的全过程其实如下：<br>S2-&gt;T2-&gt;S2-&gt;T2-&gt;  ……  -&gt;T2-&gt;S1-&gt;S0-&gt;T0-&gt;S0-&gt;……-&gt;S0-&gt;T0(全0)<br>下划线表示胜利一方的取法。  是否发现了他们的惊人相似之处。<br>我们不难发现(见加黑部分)，S1态可以转变为S0态（第二题做法），也可以转变为<br>T0（第一题做法）。哪一方控制了S1态，他即可以有办法使自己得到最后一根（转变为<br>T0）,也可以使对方得到最后一根（转变为S0）。<br>所以，抢夺S1是制胜的关键！<br>为此，始终把T2态让给对方，将使对方处于被动状态，他早晚将把状态变为S1.</p>
<p>推荐HDOJ题目<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1907" target="_blank" rel="noopener">http://acm.hdu.edu.cn/showproblem.php?pid=1907</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2509" target="_blank" rel="noopener">http://acm.hdu.edu.cn/showproblem.php?pid=2509</a><br>看完上面的结论，就能顺利解决上面2道了</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>S-Nim<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1536" target="_blank" rel="noopener">http://acm.hdu.edu.cn/showproblem.php?pid=1536</a><br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1944" target="_blank" rel="noopener">http://acm.hdu.edu.cn/showproblem.php?pid=1944</a></p>
<p>&nbsp;</p>
<p>博弈算法入门小节 1536 1517 1907<br>小子最近迷途于博弈之中。。。感触颇深。<br>为了让大家能够在学习博弈的时候少走弯路，最重要的也是为了加深自己的影响，温故而知新，特发此贴与大家共勉。<br>学博弈先从概念开始：<br>特别推荐LCY老师的课件：博弈入门。<br>下载地址：<a href="http://acm.hdu.edu.cn/forum/read.php?tid=6875" target="_blank" rel="noopener">http://acm.hdu.edu.cn/forum/read.php?tid=6875</a><br>这个课件个人认为从博弈的基本思想，一直到解博弈的中心算法做了很好的诠释。但是特别要注意的是。课件后面一部分英语写的讲义是重中之重。小子英语很弱，在这困扰很久。现在为大家大概介绍一下。<br>主要是后继点和SG值的问题:<br>SG值：一个点的SG值就是一个不等于它的后继点的SG的且大于等于零的最小整数。<br>后继点：也就是按照题目要求的走法（比如取石子可以取的数量，方法）能够走一步达到的那个点。<br>具体的有关SG值是怎么运用的希望大家自己多想想。<br>课件后面有一个1536的代码。可以放在后面做做<br>看到这里推荐大家做几道题：</p>
<p>1846（最简单的博弈水题）<br>1847（求SG值）</p>
<p>有了上面的知识接下来我们来看看组合博弈（n堆石子）<br>推荐大家看个资料：<br>博弈-取石子游戏(推荐等级五星级)<br><a href="http://acm.hdu.edu.cn/forum/read.php?fid=20&amp;tid=5748" target="_blank" rel="noopener">http://acm.hdu.edu.cn/forum/read.php?fid=20&amp;tid=5748</a><br><a href="http://hi.baidu.com/netnode/blog/item/30932c2edc7384514fc226ea.html" target="_blank" rel="noopener">http://hi.baidu.com/netnode/blog/item/30932c2edc7384514fc226ea.html</a><br>这里提出了一个奇异状态的问题。看了这篇文章你会发现异或运算在博弈中使用的妙处。当然这里指出的只是组合博弈中一种特殊情况。<br>王道还是对SG值的求解，但是知道这么一种思路无疑对思维的广度和深度扩展是很有帮助的。<br>ZZ博弈<br><a href="http://acm.hdu.edu.cn/forum/read.php?fid=9&amp;tid=10617" target="_blank" rel="noopener">http://acm.hdu.edu.cn/forum/read.php?fid=9&amp;tid=10617</a><br>这里介绍了组和博弈的两种大的类型，一种是最后取的是N状态一种是最后取的是P状态，两个状态的解题方法能看懂很有帮助。当然，能够把推导过程理解，吃透无疑是大牛级的做法~小子也佩服的紧~<br>1536题推荐做做这题，这题前面提醒大家是一个求SG值的题目，题目前面是对异或运算运用在组合博弈问题中的很好的解释。当然题目本身是有所不同的。因为在这里面对取法有所要求。那么这样就回归到了解决博弈问题的王道算法——求SG值上。<br>有关运用求SG值的博弈题目有：</p>
<ul>
<li>1850（也可基于奇异状态异或）</li>
<li>1848（中和的大斐波那契数列的典型求SG值题）</li>
<li>1517（个人认为有点猥琐的题目。。。。在此题上困扰很久。当然搞出来很开心。小子是用比较规矩的求SG值的方法求出来的，但是论坛有人对其推出来了规律，这里佩服一下，大家可以学习一下）</li>
<li>1079（更猥琐的题目，对新手要求较高，因为按传统方法需要比较细致的模拟加对边角状态的考虑，同样有人推出来了公式）<br>当你全部看完以上的东西。做完以上的题目的话。。。小子恭喜你~你博弈入门了~~~~<br>这里小子告诉大家。博弈很强大。学习要耐心~谢谢</li>
</ul>
<p>ACM课作业：<br>1001 Brave Game<br>1002 Good Luck in CET-4 Everybody!<br>1003 Fibonacci again and again<br>1004 Rabbit and Grass<br>1005 Being a Good Boy in Spring Festival<br>1006 Public Sale<br>1007 悼念512汶川大地震遇难同胞——选拔志愿者<br>1008 kiki’s game<br>1009 Calendar Game<br>1010 A Multiplication Game<br>1011 Digital Deletions<br>1012 S-Nim<br><a href="http://acm.hdu.edu.cn/forum/read.php?tid=11339&amp;fpage=0&amp;toread=&amp;page=1" target="_blank" rel="noopener">http://acm.hdu.edu.cn/forum/read.php?tid=11339&amp;fpage=0&amp;toread=&amp;page=1</a></p>
<p><em> </em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/26/e8-bd-aclinux-e6-b7-bb-e5-8a-a0-e7-94-a8-e6-88-b7-e3-80-81-e6-9d-83-e9-99-90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/26/e8-bd-aclinux-e6-b7-bb-e5-8a-a0-e7-94-a8-e6-88-b7-e3-80-81-e6-9d-83-e9-99-90/" itemprop="url">[转]linux 添加用户、权限</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-26T20:52:02+08:00">
                2016-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转自：<a href="http://www.cnblogs.com/daizhuacai/archive/2013/01/17/2865132.html" target="_blank" rel="noopener">linux 添加用户、权限</a></p>
<p><strong># useradd –d /usr/sam -m sam</strong></p>
<p>此命令创建了一个用户sam，其中-d和-m选项用来为登录名sam产生一个主目录/usr/sam（/usr为默认的用户主目录所在的父目录）。</p>
<p>&nbsp;</p>
<p>假设当前用户是sam，则下面的命令修改该用户自己的口令：</p>
<p><strong># passwd</strong></p>
<p>Old password:<strong>**</strong></p>
<p>New password:<strong><em>*</em></strong></p>
<p>Re-enter new password:<strong><em>*</em></strong></p>
<p>&nbsp;</p>
<p>如果是超级用户，可以用下列形式指定任何用户的口令：</p>
<p><strong># passwd sam</strong></p>
<p>New password:<strong><em>*</em></strong></p>
<p>Re-enter new password:<strong><em>*</em></strong></p>
<p>&nbsp;</p>
<p><strong>&gt;&gt;参考1====================================</strong></p>
<p><strong>1、添加用户</strong></p>
<p>首先用adduser命令添加一个普通用户，命令如下：</p>
<p>#adduser tommy  //添加一个名为tommy的用户</p>
<p>#passwd tommy   //修改密码<br>Changing password for user tommy.<br>New UNIX password:     //在这里输入新密码<br>Retype new UNIX password:  //再次输入新密码<br>passwd: all authentication tokens updated successfully.<br><strong>2、赋予root权限
</strong>方法一：修改 /etc/sudoers 文件，找到下面一行，把前面的注释（#）去掉</p>
<h2 id="Allows-people-in-group-wheel-to-run-all-commands"><a href="#Allows-people-in-group-wheel-to-run-all-commands" class="headerlink" title="Allows people in group wheel to run all commands"></a>Allows people in group wheel to run all commands</h2><p>%wheel    ALL=(ALL)    ALL<br>然后修改用户，使其属于root组（wheel），命令如下：</p>
<p>#usermod -g root tommy<br>修改完毕，现在可以用tommy帐号登录，然后用命令 su - ，即可获得root权限进行操作。<br>方法二：修改 /etc/sudoers 文件，找到下面一行，在root下面添加一行，如下所示：</p>
<h2 id="Allow-root-to-run-any-commands-anywhere"><a href="#Allow-root-to-run-any-commands-anywhere" class="headerlink" title="Allow root to run any commands anywhere"></a>Allow root to run any commands anywhere</h2><p>root    ALL=(ALL)     ALL<br>tommy   ALL=(ALL)     ALL<br>修改完毕，现在可以用tommy帐号登录，然后用命令 su - ，即可获得root权限进行操作。</p>
<p>&nbsp;</p>
<p><table></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td>&nbsp;</td></p>
<p><strong>&gt;&gt;参考2====================================</strong></p>
<p><strong>用useradd新增的用户不能直接用ssh远程访问，需要修改ssh相关配置
</strong>如下：<br>vi /etc/ssh/sshd_config<br>添加</p>
<p><pre>AllowUsers root@192.168.1.32 admin<br>多个用户用空格隔开</pre><br><br><br><br><br><strong>&gt;&gt;参考3====================================</strong><br><strong>如何让普通用户获得root用户的权限执行操作</strong>而不需要知道root用户的密码或向root用户进行切换呢？有一个命令sudo可以实现这个功能.<br>Sudo的工作流程：<br>（1）root用户编辑/etc/sudoers文件,添加要分配的普通用户记录,其中有这么一行记录：root ALL=(ALL) ALL,在这行后面添加：Sam ALL=(ALL) ALL<br>(2) 那么sam用户在执行操作时,如果所执行的操作自己没有权限,则会去/etc/sudoers文件中查找是否有对应的记录,如果有的话则临时获得root权限,执行只有root才能执行的操作.<br>注意：这里会提示输入密码,但是输入的是sam用户的密码,而不是root用户的密码.例如：<br>Shell&gt; sudo mkdir –p a/b/c/d<br>We trust you have received the usual lecture from the local System<br>Administrator. It usually boils down to these three things:</p>
<p>#1) Respect the privacy of others.</p>
<p>#2) Think before you type.</p>
<p>#3) With great power comes great responsibility.<br>Password: #这里的密码是sam用户自己的密码,而不是root的密码<br>几个操作：<br>1) 编辑/etc/sudoers文件,使用visudo命令,<br>Shell&gt; visudo<br>其实visudo命令也是调用vi去编辑sudoer文件的,但是在保存时会去检查你修改后文件的语法,如果错误是不能保存的,但是如果直接用vi来编辑该文件,强制保存虽然成功,但是如果有语<br>法错误这里并不能给出提示,也就导致了后面sudo命令的不可用.<br>2) 记录解析：<br>Sam ALL=(ALL) ALL<br>使用者帐户 登入的主机=（可以变换的身份） 可以下达的命令<br>上述语句的意思是 sam用户可以在任何地方登录,并可切换成任何用户进行任何操作.这里如果（ALL）不写,只写为 sam ALL=ALL,他默认只能切换为root用户.</p>
<p>&nbsp;</p>
<p><strong>&gt;&gt;参考4====================================</strong></p>
<p><strong>linux chown命令参数及用法详解–改变档案的所有者:</strong></p>
<p>要更改文件 program.c 的所有者：<strong> chown jim program.c
</strong>program.c 的用户访问权限现在应用到 jim。作为所有者，jim 可以使用 <a href="http://www.linuxso.com/command/chmod.html" target="_blank" rel="noopener">chmod</a> 命令允许或拒绝其他用户访问 program.c。</p>
<p>要将目录 /tmp/src 中所有文件的所有者和组更改为用户 john 和组 build：<strong>chown -R john:build /tmp/src</strong></p>
<p>如: **tomcat的安装目录的所有者修改(#chown -R user:group /usr/java/tomcat5.5)</p>
<p>**</p>
<p><strong>&gt;&gt;参考5====================================</strong></p>
<p>linux下添加，删除，修改，查看用户和用户组</p>
<p>1，创建组</p>
<p>groupadd test</p>
<p>增加一个test组</p>
<p>2，修改组</p>
<p>groupmod -n test2 test</p>
<p>将test组的名子改成test2</p>
<p>3，删除组</p>
<p>groupdel test2</p>
<p>删除 组test2</p>
<p>4，查看组</p>
<p>a），查看当前登录用户所在的组 groups，查看apacheuser所在组groups apacheuser</p>
<p>b），查看所有组 cat /etc/group</p>
<p>c），有的linux系统没有/etc/group文件的，这个时候看下面的这个方法</p>
<p>cat /etc/passwd |awk -F [:] ‘{print $4}’ |sort|uniq | getent group |awk -F [:] ‘{print $1}’</p>
<p>这里用到一个命令是getent,可以通过组ID来查找组信息,如果这个命令没有的话,那就很难查找,系统中所有的组了.</p>
<p>二，用户操作</p>
<p>1，增加用户</p>
<p>查看复制打印?</p>
<p>[root@krlcgcms01 mytest]# useradd –help</p>
<p>Usage: useradd [options] LOGIN</p>
<p>Options:</p>
<p>-b, –base-dir BASE_DIR       设置基本路径作为用户的登录目录</p>
<p>-c, –comment COMMENT         对用户的注释</p>
<p>-d, –home-dir HOME_DIR       设置用户的登录目录</p>
<p>-D, –defaults                改变设置</p>
<p>-e, –expiredate EXPIRE_DATE 设置用户的有效期</p>
<p>-f, –inactive INACTIVE       用户过期后，让密码无效</p>
<p>-g, –gid GROUP               使用户只属于某个组</p>
<p>-G, –groups GROUPS           使用户加入某个组</p>
<p>-h, –help                    帮助</p>
<p>-k, –skel SKEL_DIR           指定其他的skel目录</p>
<p>-K, –key KEY=VALUE           覆盖 /etc/login.defs 配置文件</p>
<p>-m, –create-home             自动创建登录目录</p>
<p>-l,                           不把用户加入到lastlog文件中</p>
<p>-M,                           不自动创建登录目录</p>
<p>-r,                           建立系统账号</p>
<p>-o, –non-unique              允许用户拥有相同的UID</p>
<p>-p, –password PASSWORD       为新用户使用加密密码</p>
<p>-s, –shell SHELL             登录时候的shell</p>
<p>-u, –uid UID                 为新用户指定一个UID</p>
<p>-Z, –selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping</p>
<p>[root@krlcgcms01 mytest]# useradd –help</p>
<p>Usage: useradd [options] LOGIN</p>
<p>&nbsp;</p>
<p>Options:</p>
<p>-b, –base-dir BASE_DIR       设置基本路径作为用户的登录目录</p>
<p>-c, –comment COMMENT         对用户的注释</p>
<p>-d, –home-dir HOME_DIR       设置用户的登录目录</p>
<p>-D, –defaults                改变设置</p>
<p>-e, –expiredate EXPIRE_DATE 设置用户的有效期</p>
<p>-f, –inactive INACTIVE       用户过期后，让密码无效</p>
<p>-g, –gid GROUP               使用户只属于某个组</p>
<p>-G, –groups GROUPS           使用户加入某个组</p>
<p>-h, –help                    帮助</p>
<p>-k, –skel SKEL_DIR           指定其他的skel目录</p>
<p>-K, –key KEY=VALUE           覆盖 /etc/login.defs 配置文件</p>
<p>-m, –create-home             自动创建登录目录</p>
<p>-l,                           不把用户加入到lastlog文件中</p>
<p>-M,                           不自动创建登录目录</p>
<p>-r,                           建立系统账号</p>
<p>-o, –non-unique              允许用户拥有相同的UID</p>
<p>-p, –password PASSWORD       为新用户使用加密密码</p>
<p>-s, –shell SHELL             登录时候的shell</p>
<p>-u, –uid UID                 为新用户指定一个UID</p>
<p>-Z, –selinux-user SEUSER     use a specific SEUSER for the SELinux user mappinguseradd test</p>
<p>&nbsp;</p>
<p>passwd test</p>
<p>增加用户test，有一点要注意的，useradd增加一个用户后，不要忘了给他设置密码，不然不能登录的。</p>
<p>&nbsp;</p>
<p>2，修改用户</p>
<p>usermod -d /home/test -G test2 test</p>
<p>将test用户的登录目录改成/home/test，并加入test2组，注意这里是大G。</p>
<p>gpasswd -a test test2 将用户test加入到test2组</p>
<p>gpasswd -d test test2 将用户test从test2组中移出</p>
<p>&nbsp;</p>
<p>3，删除用户</p>
<p>userdel test</p>
<p>将test用户删除</p>
<p>&nbsp;</p>
<p>4，查看用户</p>
<p>a），查看当前登录用户</p>
<p>[root@krlcgcms01 ~]# w</p>
<p>[root@krlcgcms01 ~]# who</p>
<p>&nbsp;</p>
<p>b），查看自己的用户名</p>
<p>[root@krlcgcms01 ~]# whoami</p>
<p>&nbsp;</p>
<p>c），查看单个用户信息</p>
<p>[root@krlcgcms01 ~]# finger apacheuser</p>
<p>[root@krlcgcms01 ~]# id apacheuser</p>
<p>&nbsp;</p>
<p>d），查看用户登录记录</p>
<p>[root@krlcgcms01 ~]# last 查看登录成功的用户记录</p>
<p>[root@krlcgcms01 ~]# lastb 查看登录不成功的用户记录</p>
<p>&nbsp;</p>
<p>e），查看所有用户</p>
<p>[root@krlcgcms01 ~]# cut -d : -f 1 /etc/passwd</p>
<p>[root@krlcgcms01 ~]# cat /etc/passwd |awk -F \: ‘{print $1}’</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/12/e4-ba-8c-e5-88-86-e5-9b-be-e5-b8-a6-e6-9d-83-e5-8c-b9-e9-85-8d-e5-8f-8akm-e7-ae-97-e6-b3-95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/12/e4-ba-8c-e5-88-86-e5-9b-be-e5-b8-a6-e6-9d-83-e5-8c-b9-e9-85-8d-e5-8f-8akm-e7-ae-97-e6-b3-95/" itemprop="url">二分图带权匹配及KM算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-12T14:06:35+08:00">
                2016-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文出处：<a href="http://www.cnblogs.com/kuangbin/archive/2012/08/19/2646535.html" target="_blank" rel="noopener">Kuhn-Munkres算法（二分图最大权匹配）</a></p>
<p>二分图如果是没有权值的，求最大匹配。则是用匈牙利算法求最大匹配。如果带了权值，求最大或者最小权匹配，则必须用KM算法。</p>
<p>其实最大和最小权匹配都是一样的问题。只要会求最大匹配，如果要求最小权匹配，则将权值取相反数，再把结果取相反数，那么最小权匹配就求出来了。</p>
<p>下面是从网上的博客摘抄的一些零散的总结。。。。。</p>
<p><strong>[二分图带权匹配与最佳匹配]</strong></p>
<p>什么是二分图的带权匹配？二分图的带权匹配就是求出一个匹配集合，使得集合中边的权值之和最大或最小。而二分图的最佳匹配则一定为<strong>完备匹配</strong>，在此基础上，才要求匹配的边权值之和最大或最小。二分图的<strong>带权匹配与最佳匹配不等价，也不互相包含</strong>。</p>
<p>这两个的关系比较悬乎。我的理解就是带权匹配是不考虑是不是完备，只求最大或最小权匹配。而最佳匹配则必须在完备匹配的基础上找最大或最小权匹配。</p>
<p>这两个还是结合具体题目比较好理解些。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>KM算法是求最大权完备匹配，如果要求最小权完备匹配怎么办？方法很简单，只需将所有的边权值取其相反数，求最大权完备匹配，匹配的值再取相反数即可。</p>
<p>&nbsp;</p>
<p>KM算法的运行要求是<strong>必须存在一个完备匹配</strong>，如果求一个最大权匹配(不一定完备)该如何办？依然很简单，把不存在的边权值赋为0。</p>
<p>&nbsp;</p>
<p>KM算法求得的最大权匹配是<strong>边权值和</strong>最大，如果我想要<strong>边权之积</strong>最大，又怎样转化？还是不难办到，每条边权取自然对数，然后求最大和权匹配，求得的结果a再算出e^a就是最大积匹配。至于精度问题则没有更好的办法了。</p>
<p>&nbsp;</p>
<p>二分图最优匹配：对于二分图的每条边都有一个权（非负），要求一种完备匹配方案，使得所有匹配边的权和最大，记做最优完备匹配。（特殊的，当所有边的权为1时，就是最大完备匹配问题）</p>
<p>定义     设G＝&lt;V<sub>1</sub>，V<sub>2</sub>，E&gt;为二部图，|V<sub>1</sub>|≤|V<sub>2</sub>|，M为G中一个最大匹配，且|M|＝|V<sub>1</sub>|，则称M为V<sub>1</sub>到V<sub>2</sub>的<strong>完备匹配</strong>。</p>
<p>在上述定义中，若|V<sub>2</sub>|＝|V<sub>1</sub>|，则完备匹配即为<strong>完美匹配</strong>，若|V<sub>1</sub>|&lt;|V<sub>2</sub>|，则完备匹配为G中最大匹配。</p>
<p>KM算法是通过给每个顶点一个标号（叫做<strong>顶标</strong>）来把求最大权匹配的问题转化为求完备匹配的问题的。设顶点X<sub>i</sub>的顶标为A[i]，顶点Y<sub>i</sub>的顶标为B[i]，顶点X<sub>i</sub>与Y<sub>j</sub>之间的边权为w[i,j]。在算法执行过程中的任一时刻，对于任一条边(i,j)，A[i]+B[j]&gt;=w[i,j]始终成立，初始A[i]为与xi相连的边的最大边权，B[j]=0。KM算法的正确性基于以下定理：</p>
<div>设 G(V,E) 为二部图， G’(V,E’) 为二部图的子图。如果对于 G’ 中的任何边&lt;x,y&gt; 满足， L(x)+ L(y)== W<sub>x,y</sub>，我们称 G’(V,E’) 为 G(V,E) 的等价子图或相等子图（是G的生成子图）。</div>

<p><strong>若由二分图中所有满足A[i]+B[j]=w[i,j]的边(i,j)构成的子图（称做<strong>相等子图</strong>）有完备匹配，那么这个完备匹配就是二分图的最大权匹配。</strong></p>
<p>因为对于二分图的任意一个匹配，如果它包含于相等子图，那么它的边权和等于所有顶点的顶标和；如果它有的边不包含于相等子图，那么它的边权和小于所有顶点的顶标和（即不是最优匹配）。所以相等子图的完备匹配一定是二分图的最大权匹配。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>该算法是通过给每个顶点一个标号（叫做顶标）来把求最大权匹配的问题转化为求完备匹配的问题的。设顶点Xi的顶标为A[ i ]，顶点Yj的顶标为B[ j ]，顶点Xi与Yj之间的边权为w[i,j]。在算法执行过程中的任一时刻，对于任一条边(i,j)，A[ i ]+B[j]&gt;=w[i,j]始终成立。</p>
<p><div></div><br>KM算法的正确性基于以下定理：</p>
<p><div></div><br>若由二分图中所有满足A[ i ]+B[j]=w[i,j]的边(i,j)构成的子图（称做相等子图）有完备匹配，那么这个完备匹配就是二分图的最大权匹配。</p>
<p><div></div><br>首先解释下什么是完备匹配，所谓的完备匹配就是在二部图中，X点集中的所有点都有对应的匹配或者是</p>
<p><div></div><br>Y点集中所有的点都有对应的匹配，则称该匹配为完备匹配。</p>
<p><div></div><br>这个定理是显然的。因为对于二分图的任意一个匹配，如果它包含于相等子图，那么它的边权和等于所有顶点的顶标和；如果它有的边不包含于相等子图，那么它的边权和小于所有顶点的顶标和。所以相等子图的完备匹配一定是二分图的最大权匹配。</p>
<p><div></div><br>初始时为了使A[ i ]+B[j]&gt;=w[i,j]恒成立，令A[ i ]为所有与顶点Xi关联的边的最大权，B[j]=0。如果当前的相等子图没有完备匹配，就按下面的方法修改顶标以使扩大相等子图，直到相等子图具有完备匹配为止。</p>
<p><div></div><br>我们求当前相等子图的完备匹配失败了，是因为对于某个X顶点，我们找不到一条从它出发的交错路。这时我们获得了一棵交错树，它的叶子结点全部是X顶点。现在我们把交错树中X顶点的顶标全都减小某个值d，Y顶点的顶标全都增加同一个值d，那么我们会发现：</p>
<p><div></div><br>1）两端都在交错树中的边(i,j)，A[ i ]+B[j]的值没有变化。也就是说，它原来属于相等子图，现在仍属于相等子图。</p>
<p><div></div><br>2）两端都不在交错树中的边(i,j)，A[ i ]和B[j]都没有变化。也就是说，它原来属于（或不属于）相等子图，现在仍属于（或不属于）相等子图。</p>
<p><div></div><br>3）X端不在交错树中，Y端在交错树中的边(i,j)，它的A[ i ]+B[j]的值有所增大。它原来不属于相等子图，现在仍不属于相等子图。</p>
<p><div></div><br>4）X端在交错树中，Y端不在交错树中的边(i,j)，它的A[ i ]+B[j]的值有所减小。也就说，它原来不属于相等子图，现在可能进入了相等子图，因而使相等子图得到了扩大。</p>
<p><div></div><br>现在的问题就是求d值了。为了使A[ i ]+B[j]&gt;=w[i,j]始终成立，且至少有一条边进入相等子图，d应该等于：</p>
<p><div></div><br>Min{A[ i ]+B[j]-w[i,j] | Xi在交错树中，Yi不在交错树中}。以上就是KM算法的基本思路。但是朴素的实现方法，时间复杂度为O(n4)——需要找O(n)次增广路，每次增广最多需要修改O(n)次顶标，每次修改顶标时由于要枚举边来求d值，复杂度为O(n2)。实际上KM算法的复杂度是可以做到O(n3)的。我们给每个Y顶点一个“松弛量”函数slack，每次开始找增广路时初始化为无穷大。在寻找增广路的过程中，检查边(i,j)时，如果它不在相等子图中，则让slack[j]变成原值与A[ i ]+B[j]-w[i,j]的较小值。这样，在修改顶标时，取所有不在交错树中的Y顶点的slack值中的最小值作为d值即可。但还要注意一点：修改顶标后，要把所有的不在交错树中的Y顶点的slack值都减去d。</p>
<p><div></div><br>Kuhn－Munkras算法流程：</p>
<p><div></div><br>(1)初始化可行顶标的值</p>
<p><div></div><br>(2)用匈牙利算法寻找完备匹配</p>
<p><div></div><br>(3)若未找到完备匹配则修改可行顶标的值</p>
<p><div></div><br>(4)重复(2)(3)直到找到相等子图的完备匹配为止</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>最后还是强调一点：</p>
<p>KM算法用来解决最大权匹配问题： 在一个二分图内，左顶点为X，右顶点为Y，现对于每组左右连接XiYj有权wij，求一种匹配使得所有wij的和最大。</p>
<p>也就是最大权匹配一定是完备匹配。如果两边的点数相等则是完美匹配。</p>
<p>如果点数不相等，其实可以虚拟一些点，使得点数相等，也成为了完美匹配。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/11/[转]二分图多重匹配问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/11/[转]二分图多重匹配问题/" itemprop="url">[转]二分图多重匹配问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-11T19:48:43+08:00">
                2016-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文出处：<a href="http://www.cppblog.com/MatoNo1/archive/2011/03/26/142766.html" target="_blank" rel="noopener">二分图多重匹配问题</a></p>
<p>在二分图最大匹配中，每个点（不管是X方点还是Y方点）最多只能和一条匹配边相关联，然而，我们经常遇到这种问题，即二分图匹配中一个点可以和多条匹配边相关联，但有上限，或者说，L<sub>i</sub>表示点i最多可以和多少条匹配边相关联。</p>
<p>二分图多重匹配分为二分图多重最大匹配与二分图多重最优匹配两种，分别可以用最大流与最大费用最大流解决。</p>
<p>（1）二分图多重最大匹配：<br>在原图上建立源点S和汇点T，S向每个X方点连一条容量为该X方点L值的边，每个Y方点向T连一条容量为该Y方点L值的边，原来二分图中各边在新的网络中仍存在，容量为1（若该边可以使用多次则容量大于1），求该网络的最大流，就是该二分图多重最大匹配的值。</p>
<p>（2）二分图多重最优匹配：<br>在原图上建立源点S和汇点T，S向每个X方点连一条容量为该X方点L值、费用为0的边，每个Y方点向T连一条容量为该Y方点L值、费用为0的边，原来二分图中各边在新的网络中仍存在，容量为1（若该边可以使用多次则容量大于1），费用为该边的权值。求该网络的最大费用最大流，就是该二分图多重最优匹配的值。</p>
<p>例题：<br>【1】POJ1698 Alice’s Chance<br>将电影作为X方点，每一天作为Y方点（最多50周，每周7天，所以共设350个Y方点），若第i个电影可以在第j天搞就连边(i, j)。每个X方点的L值为该电影总共要搞多少天，每个Y方点的L值为1（每天最多只能搞一个电影），然后求二分图多重最大匹配，若能使所有从源点连向X方点的边都满流，则输出Yes，否则输出No。<br>【2】POJ2112 Optimal Milking<br>先预处理求出每两个点（包括挤奶点和牛）间的最短距离，然后将所有挤奶点作为X方点（L值为该挤奶点最多可以容纳多少牛），所有牛作为Y方点（L值为1），X<sub>i</sub>和Y<sub>j</sub>间边的权值为这两个点之间的最短距离（若这两点间不存在路径则此处无边），然后问题就变成了求一个多重匹配，使得每个Y方点都有匹配点且匹配边中权值的最大值最小。<br>可以枚举最大边权值S，然后，原图中所有权值大于S的边都要删去。若此时图中存在符合要求的多重匹配，则S合法否则S不合法。由于S的合法性是单调的，所以可以二分枚举S。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/10/zoj3329-one-person-game-e6-a6-82-e7-8e-87dp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/10/zoj3329-one-person-game-e6-a6-82-e7-8e-87dp/" itemprop="url">ZOJ3329 One Person Game(概率dp)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-10T18:04:01+08:00">
                2016-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Orz，，这公式推的太神奇了</p>
<p><strong>题目链接：</strong><a href="http://acm.zju.edu.cn/onlinejudge/showProblem.do?problemCode=3329" target="_blank" rel="noopener">ZOJ3329 One Person Game</a></p>
<p>还有一道相似的题目，都需要类似与手动消元的优化。<a href="http://acm.hdu.edu.cn/showproblem.php?pid=4089" target="_blank" rel="noopener">HDU 4089 Activation</a></p>
<p><strong>题目大意：</strong>一次投三枚骰子，每次得分是三个骰子点数之和，如果骰子1的点数为a，骰子b的点数是b，骰子3的点数是c则得分清零，问达到n分以上的期望投掷次数</p>
<p><strong>解题思路：</strong></p>
<p>明显是概率dp，我们设dp[i]为现在得分为i，达到目标积分还要的分数。可得递推方程</p>
<p>dp[i] = ∑dp[i+k]<em>p[k] + dp[0] </em>p0+1</p>
<p>p0是使积分归零的概率</p>
<p>方程中每个状态的计算都要dp[0]，硬推是不行的。。。</p>
<p>设dp[i]=A[i]*dp[0]+B[i]</p>
<p>带入第一个公式得</p>
<p>dp[i]=∑(A[i+k]<em>dp[0]</em>p[k]+B[i+k]<em>p[k])+dp[0]</em>p[0]+1</p>
<p>∴dp[i]=(∑(A[i+k]<em>p[k])+p0)</em>dp[0] + ∑(B[i+k]*p[k])+1</p>
<p>∴A[i]=∑(A[i+k]<em>p[k])+p0    B[i]=∑(B[i+k]</em>p[k])+1</p>
<p>这样先地推出A[0]和B[0]，dp[0]=B[0]/(1-A[0])</p>
<p><strong>AC代码：</strong></p>
<p>写的挺搓的。。。</p>
<p><pre class="lang:c++ decode:true " title="ZOJ3593 One Person Game">#include &lt;cstdio&gt;</pre></p>
<p>#include &lt;cstring&gt;</p>
<p>#include &lt;iostream&gt;</p>
<p>#include &lt;algorithm&gt;</p>
<p>#include &lt;cstdlib&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;assert.h&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#define FS first</p>
<p>#define SE second</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson ((o &lt;&lt; 1) | 1), M + 1, R</p>
<p>#define lc (o &lt;&lt; 1)</p>
<p>#define rc ((o &lt;&lt; 1) | 1)</p>
<p>using namespace std;</p>
<p>typedef long long LL;<br>const int DEG = 20;<br>const double eps = 1e-7;<br>const int MAXN = 500 + 100;</p>
<p>double A[MAXN], B[MAXN];<br>map&lt;int, double&gt; go;</p>
<p>int main() {<br>    int T;<br>    scanf(“%d”, &amp;T);<br>    int n, k1, k2, k3, a, b, c;<br>    while(T–) {<br>        scanf(“%d%d%d%d%d%d%d”, &amp;n, &amp;k1, &amp;k2, &amp;k3, &amp;a, &amp;b, &amp;c);<br>        memset(A, 0, sizeof A);<br>        memset(B, 0, sizeof B);<br>        go.clear();<br>        for(int i = 1 ; i &lt;= k1 ; i++)<br>            for(int j = 1 ; j &lt;= k2 ; j++)<br>                for(int k = 1 ; k &lt;= k3 ; k++) {<br>                    go[i + k + j] += (1.0 / k1) <em> (1.0 / k2) </em> (1.0 / k3);<br>                }</p>
<pre><code>    go[a + b + c] -= (1.0 / k1) * (1.0 / k2) * (1.0 / k3);
    double p0 = (1.0 / k1) * (1.0 / k2) * (1.0 / k3);
    for(int i = n ; i &amp;gt;= 0 ; i--) {
        for(map&amp;lt;int, double&amp;gt;::iterator it = go.begin() ; it != go.end() ; ++it) {
            A[i] += A[i + it-&amp;gt;FS] * it-&amp;gt;SE;
            B[i] += B[i + it-&amp;gt;FS] * it-&amp;gt;SE;
        }
        A[i] += p0;
        B[i] += 1;
    }
    printf(&quot;%.10f\n&quot;, B[0] / (1 - A[0]));
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/09/codeforces-466e-information-graph/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/09/codeforces-466e-information-graph/" itemprop="url">Codeforces 466E Information Graph</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-09T20:09:46+08:00">
                2016-03-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="http://codeforces.com/contest/466/problem/E" target="_blank" rel="noopener">Codeforces 466E</a></p>
<p><strong>题目大意：</strong>输入数字n，m代表有n个点，m个查询</p>
<p>初始是所有点都孤立</p>
<p>接下来有n行，每行代表一个查询，形式是以下形式之一：</p>
<ol>
<li>1 x y 把y设为x的根节点，保证x之前没有根节点</li>
<li>2 x 把x到起根节点的所有得点标记cnt cnt为2操作的出现次数，从1开始</li>
<li>3 x i 询问x节点是否被编号i曾经标记过，是输出YES，否输出NO<br><strong>解题思路：</strong>询问2是标记到当时生成的树的树根，这种不断往里加边生成树的过程很容易让人联想到并查集，在并查集中记录深度，这样就能求出每次2操作影响到它上面多少个节点。在最终形成的树/森林中，询问3的节点如果和标记i在一条链上，就能通过深度求出是否受影响了。</li>
</ol>
<p>是否在一条链上可以通过倍增LCA求出，把两个节点调整到统一高度后，如果两个点重合就在一条链上，反之不在一条链上。</p>
<p>当然了，如果要用LCA的话就要离线一下，先建树求2操作的距离，在用LCA和求得的距离直行操作3</p>
<p>这里要注意一点，给出的图可能是一个森林，如果是的话就设置一个虚拟节点，在LCA查询是调到同一高度后不要在虚拟节点上就行了。</p>
<p><strong>AC代码：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">#include &amp;lt;cstdio&amp;gt;</span><br><span class="line">#include &amp;lt;cstring&amp;gt;</span><br><span class="line">#include &amp;lt;iostream&amp;gt;</span><br><span class="line">#include &amp;lt;algorithm&amp;gt;</span><br><span class="line">#include &amp;lt;cstdlib&amp;gt;</span><br><span class="line">#include&amp;lt;cstring&amp;gt;</span><br><span class="line">#include&amp;lt;assert.h&amp;gt;</span><br><span class="line">#include&amp;lt;stack&amp;gt;</span><br><span class="line">#include&amp;lt;set&amp;gt;</span><br><span class="line">#include&amp;lt;queue&amp;gt;</span><br><span class="line">#include&amp;lt;map&amp;gt;</span><br><span class="line">#include&amp;lt;set&amp;gt;</span><br><span class="line">#define FS first</span><br><span class="line">#define SE second</span><br><span class="line">#define lson (o &amp;lt;&amp;lt; 1), L, M</span><br><span class="line">#define rson ((o &amp;lt;&amp;lt; 1) | 1), M + 1, R</span><br><span class="line">#define lc (o &amp;lt;&amp;lt; 1)</span><br><span class="line">#define rc ((o &amp;lt;&amp;lt; 1) | 1)</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef long long LL;</span><br><span class="line">const int MAXN = 100010;</span><br><span class="line">const int INF = 0x3f3f3f3f;</span><br><span class="line">const int DEG = 20;</span><br><span class="line">const double eps = 1e-7;</span><br><span class="line"></span><br><span class="line">struct Edge &#123;</span><br><span class="line">    int to, next;</span><br><span class="line">&#125; edge[MAXN &amp;lt;&amp;lt; 1];</span><br><span class="line"></span><br><span class="line">int head[MAXN], tot;</span><br><span class="line">void AddEdge(int u, int v) &#123;</span><br><span class="line">    edge[tot].to = v;</span><br><span class="line">    edge[tot].next = head[u];</span><br><span class="line">    head[u] = tot++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    tot = 0;</span><br><span class="line">    memset(head, -1, sizeof head);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int fa[MAXN][20];</span><br><span class="line">int deg[MAXN];</span><br><span class="line">void BFS(int root) &#123;</span><br><span class="line">    queue&amp;lt;int&amp;gt; que;</span><br><span class="line">    deg[root] = 0;</span><br><span class="line">    fa[root][0] = root;</span><br><span class="line">    que.push(root);</span><br><span class="line">    while(!que.empty()) &#123;</span><br><span class="line">        int tmp = que.front();</span><br><span class="line">        que.pop();</span><br><span class="line">        for(int i = 1 ; i &amp;lt; DEG ; i++)</span><br><span class="line">            fa[tmp][i] = fa[fa[tmp][i - 1]][i - 1];</span><br><span class="line">        for(int i = head[tmp] ; i != -1 ; i = edge[i].next) &#123;</span><br><span class="line">            int v = edge[i].to;</span><br><span class="line">            if(v == fa[tmp][0]) continue;</span><br><span class="line">            deg[v] = deg[tmp] + 1;</span><br><span class="line">            fa[v][0] = tmp;</span><br><span class="line">            que.push(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int n, m;</span><br><span class="line"></span><br><span class="line">bool LCA(int u, int v) &#123;</span><br><span class="line">    if(deg[u] &amp;gt; deg[v]) swap(u, v);</span><br><span class="line">    int hu = deg[u], hv = deg[v];</span><br><span class="line">    int tu = u, tv = v;</span><br><span class="line">    for(int det = hv - hu, i = 0 ; det ; det &amp;gt;&amp;gt;= 1, i++) &#123;</span><br><span class="line">        if(det &amp;amp; 1)</span><br><span class="line">            tv = fa[tv][i];</span><br><span class="line">    &#125;</span><br><span class="line">    return tu == tv &amp;amp;&amp;amp; tu != n + 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int op[MAXN][3];</span><br><span class="line">int in[MAXN];</span><br><span class="line"></span><br><span class="line">int F[MAXN];</span><br><span class="line">int d[MAXN];</span><br><span class="line">int find(int x) &#123;</span><br><span class="line">    if(F[x] != x) &#123;</span><br><span class="line">        int root = find(F[x]);</span><br><span class="line">        d[x] += d[F[x]];</span><br><span class="line">        return F[x] = root;</span><br><span class="line">    &#125; else return x;</span><br><span class="line">&#125;</span><br><span class="line">map&amp;lt;int, pair&amp;lt;int, int&amp;gt; &amp;gt; go;</span><br><span class="line">int Count;</span><br><span class="line">int main() &#123;</span><br><span class="line">    init();</span><br><span class="line">    for(int i = 0 ; i &amp;lt; MAXN ; i++) F[i] = i;</span><br><span class="line"></span><br><span class="line">    scanf(&quot;%d%d&quot;, &amp;amp;n, &amp;amp;m);</span><br><span class="line">    for(int i = 0 ; i &amp;lt; m ; i++) &#123;</span><br><span class="line">        scanf(&quot;%d&quot;, &amp;amp;op[i][0]);</span><br><span class="line">        if(op[i][0] == 1) &#123;</span><br><span class="line">            scanf(&quot;%d%d&quot;, &amp;amp;op[i][1], &amp;amp;op[i][2]);</span><br><span class="line">            AddEdge(op[i][2], op[i][1]);</span><br><span class="line">            in[op[i][1]]++;</span><br><span class="line">            int u = find(op[i][1]);</span><br><span class="line">            int v = find(op[i][2]);</span><br><span class="line">            F[u] = v;</span><br><span class="line">            d[u] = d[op[i][2]] + 1;</span><br><span class="line">        &#125;</span><br><span class="line">        if(op[i][0] == 2) &#123;</span><br><span class="line">            scanf(&quot;%d&quot;, &amp;amp;op[i][1]);</span><br><span class="line">            find(op[i][1]);</span><br><span class="line">            go[++Count] = pair&amp;lt;int, int&amp;gt;(op[i][1], d[op[i][1]]);</span><br><span class="line">        &#125;</span><br><span class="line">        if(op[i][0] == 3) &#123;</span><br><span class="line">            scanf(&quot;%d%d&quot;, &amp;amp;op[i][1], &amp;amp;op[i][2]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Count = 0;</span><br><span class="line">    int root;</span><br><span class="line">    for(int i = 1 ; i &amp;lt;= n ; i++) &#123;</span><br><span class="line">        if(in[i] == 0) &#123;</span><br><span class="line">            root = i;</span><br><span class="line">            Count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(Count &amp;gt; 1) &#123;</span><br><span class="line">        root = n + 1;</span><br><span class="line">        for(int i = 1 ; i &amp;lt;= n ; i++)</span><br><span class="line">            if(in[i] == 0)</span><br><span class="line">                AddEdge(n + 1, i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BFS(root);</span><br><span class="line">    for(int i = 0 ; i &amp;lt; m ; i++) &#123;</span><br><span class="line">        if(op[i][0] == 3) &#123;</span><br><span class="line">            if(!LCA(op[i][1], go[op[i][2]].FS)) &#123;</span><br><span class="line">                printf(&quot;NO\n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                int u = op[i][1];</span><br><span class="line">                int v = go[op[i][2]].FS;</span><br><span class="line">                int dis = go[op[i][2]].SE;</span><br><span class="line">                if(deg[u] + dis &amp;lt; deg[v] || deg[v] &amp;lt; deg[u]) &#123;</span><br><span class="line">                    printf(&quot;NO\n&quot;);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    printf(&quot;YES\n&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">3 4</span><br><span class="line">1 2 1</span><br><span class="line">1 3 2</span><br><span class="line">2 3</span><br><span class="line">3 1 1</span><br><span class="line">*/</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/03/e6-a0-91-e9-93-be-e5-89-96-e5-88-86-e5-ad-a6-e4-b9-a0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/03/e6-a0-91-e9-93-be-e5-89-96-e5-88-86-e5-ad-a6-e4-b9-a0/" itemprop="url">树链剖分学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-03T21:53:02+08:00">
                2016-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>资源：</p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_6974c8b20100zc61.html" target="_blank" rel="noopener">树链剖分</a></li>
<li><a href="https://oi.abcdabcd987.com/summary-of-heavy-light-decomposition/" target="_blank" rel="noopener">树链剖分小结</a></li>
<li><a href="http://blog.anudeep2011.com/heavy-light-decomposition/" target="_blank" rel="noopener">Heavy Light Decomposition</a><br>第三个是一个英文的说明，博主是一个ioi &amp; ACM选手，非常好的博客</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/01/12167-proving-equivalences-e5-bc-ba-e8-81-94-e9-80-9a-e5-88-86-e9-87-8f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/01/12167-proving-equivalences-e5-bc-ba-e8-81-94-e9-80-9a-e5-88-86-e9-87-8f/" itemprop="url">12167 - Proving Equivalences(强联通分量)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-01T11:17:45+08:00">
                2016-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=545&amp;problem=3319&amp;mosmsg=Submission+received+with+ID+16926611" target="_blank" rel="noopener">UVA12167 - Proving Equivalences</a></p>
<p><strong>题目大意：</strong>给出一个证明关系，问至少再添加多少个证明就能完成整个证明？</p>
<p><strong>解题思路：</strong>完成整个证明和整个图是一个SCC（强连通分量）是等价的，而且在每个SCC中都是无需添加新的证明的，这样我们可以先求出所有的强连通分量，将每个SCC看成一个点，这样就得到了一个新的DAG，设DAG中入度为0的点有a个，初度为0得点有b个，答案就是max{a, b}。特判当初始图是SCC时，整个图缩为一个点此时答案是0而不是1。</p>
<p>自己想的ans=max{a, b}的一点证明，可能不严谨，不过说的通。</p>
<ol>
<li>SCC中所有的点入度初度都不为0</li>
<li>因此我们要在得到的DAG中建立适当的边，数量尽量少，使得DAG中得点入度初度都不为零</li>
<li>因此建立的边数=max{a, b}，因为从一个初度为零的点连出一条边到一个入度为零得点，这样a和b每次都减一，a，b有一个为零的时候再从剩下的点各连max{a - min{a, b}, b - min{a, b}}条边就好了。<br><strong>AC代码：</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">#include&amp;lt;cstdio&amp;gt;</span><br><span class="line">#include&amp;lt;iostream&amp;gt;</span><br><span class="line">#include&amp;lt;cstring&amp;gt;</span><br><span class="line">#include&amp;lt;string&amp;gt;</span><br><span class="line">#include&amp;lt;algorithm&amp;gt;</span><br><span class="line">#include&amp;lt;vector&amp;gt;</span><br><span class="line">#include&amp;lt;stack&amp;gt;</span><br><span class="line">#include&amp;lt;string&amp;gt;</span><br><span class="line">#include&amp;lt;set&amp;gt;</span><br><span class="line">#include&amp;lt;map&amp;gt;</span><br><span class="line">#include&amp;lt;queue&amp;gt;</span><br><span class="line">#include&amp;lt;cmath&amp;gt;</span><br><span class="line">#include&amp;lt;cstdlib&amp;gt;</span><br><span class="line">#include&amp;lt;assert.h&amp;gt;</span><br><span class="line">#define FS first</span><br><span class="line">#define SE second</span><br><span class="line">#define lson (o &amp;lt;&amp;lt; 1), L, M</span><br><span class="line">#define rson (o &amp;lt;&amp;lt; 1) | 1, M + 1, R</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">typedef long long LL;</span><br><span class="line"></span><br><span class="line">const int INF = 0x3f3f3f3f;</span><br><span class="line">const double eps = 1e-7;</span><br><span class="line">const int MAXN = 20000 + 10;</span><br><span class="line"></span><br><span class="line">vector&amp;lt;int&amp;gt; G[MAXN];</span><br><span class="line">int pre[MAXN], lowlink[MAXN], sccno[MAXN], dfs_clock, scc_cnt;</span><br><span class="line">stack&amp;lt;int&amp;gt; s;</span><br><span class="line"></span><br><span class="line">void dfs(int u) &#123;</span><br><span class="line">    pre[u] = lowlink[u] = ++dfs_clock;</span><br><span class="line">    s.push(u);</span><br><span class="line">    for(int i = 0 ; i &amp;lt; (int)G[u].size() ; i++) &#123;</span><br><span class="line">        int v = G[u][i];</span><br><span class="line">        if(!pre[v]) &#123;</span><br><span class="line">            dfs(v);</span><br><span class="line">            lowlink[u] = min(lowlink[v], lowlink[u]);</span><br><span class="line">        &#125; else if(!sccno[v]) &#123;</span><br><span class="line">            lowlink[u] = min(lowlink[u], pre[v]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(lowlink[u] == pre[u]) &#123;</span><br><span class="line">        scc_cnt++;</span><br><span class="line">        for(;;) &#123;</span><br><span class="line">            int x = s.top();</span><br><span class="line">            s.pop();</span><br><span class="line">            sccno[x] = scc_cnt;</span><br><span class="line">            if(x == u) break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void find_scc(int n) &#123;</span><br><span class="line">    dfs_clock = scc_cnt = 0;</span><br><span class="line">    memset(sccno, 0, sizeof sccno);</span><br><span class="line">    memset(pre, 0, sizeof pre);</span><br><span class="line">    for(int i = 0 ; i &amp;lt; n ; i++)</span><br><span class="line">        if(!pre[i]) dfs(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int in[MAXN], out[MAXN];</span><br><span class="line">int main() &#123;</span><br><span class="line">    int T;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;amp;T);</span><br><span class="line">    while(T--) &#123;</span><br><span class="line">        int n, m;</span><br><span class="line">        scanf(&quot;%d%d&quot;, &amp;amp;n, &amp;amp;m);</span><br><span class="line"></span><br><span class="line">        memset(in, 0, sizeof in);</span><br><span class="line">        memset(out, 0, sizeof out);</span><br><span class="line">        for(int i = 0 ; i &amp;lt;= n ; i++) &#123;</span><br><span class="line">            G[i].clear();</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i = 0 ; i &amp;lt; m ; i++) &#123;</span><br><span class="line">            int u, v;</span><br><span class="line">            scanf(&quot;%d%d&quot;, &amp;amp;u, &amp;amp;v);</span><br><span class="line">            u--; v--;</span><br><span class="line">            G[u].push_back(v);</span><br><span class="line">        &#125;</span><br><span class="line">        find_scc(n);</span><br><span class="line"></span><br><span class="line">        for(int i = 0 ; i &amp;lt; n ; i++) &#123;</span><br><span class="line">            for(int j = 0 ; j &amp;lt; (int)G[i].size() ; j++) &#123;</span><br><span class="line">                int u = sccno[i] - 1;</span><br><span class="line">                int v = sccno[G[i][j]] - 1;</span><br><span class="line">                if(u != v) &#123;</span><br><span class="line">                    in[v]++;</span><br><span class="line">                    out[u]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        int ans1 = 0, ans2 = 0;</span><br><span class="line">        for(int i = 0 ; i &amp;lt; scc_cnt ; i++) &#123;</span><br><span class="line">            if(in[i] == 0) ans1++;</span><br><span class="line">            if(out[i] == 0) ans2++;</span><br><span class="line">        &#125;</span><br><span class="line">        if(scc_cnt == 1) ans1 = ans2 = 0;</span><br><span class="line">        printf(&quot;%d\n&quot;, max(ans1,  ans2));</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/03/01/uva1108-mining-your-own-business-ef-bc-88-e5-8f-8c-e8-bf-9e-e9-80-9a-e5-88-86-e9-87-8f-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/01/uva1108-mining-your-own-business-ef-bc-88-e5-8f-8c-e8-bf-9e-e9-80-9a-e5-88-86-e9-87-8f-ef-bc-89/" itemprop="url">UVA1108 - Mining Your Own Business（双连通分量）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-01T09:38:15+08:00">
                2016-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=545&amp;page=show_problem&amp;problem=3549" target="_blank" rel="noopener">UVA1108 - Mining Your Own Business</a></p>
<p><strong>题目大意：</strong>给出一个没有重边的无向图，保证连通。让你选择最少的点染成黑色，保证任意删除一个点后，图中所有的点都可以到达一黑点，输出选点数和方案数。</p>
<p><strong>解题思路：  </strong></p>
<ul>
<li>由于无向图连通，因此所有的店都在某个双联通分量上，并且有些是割点。</li>
<li>任意删除一个点后，保证每个联通分量上都有一个黑点</li>
<li>选择割点是没有意义的，因为如果选择割点，删除割点后，新增加的每一个连通分量上都要有一个黑点，这样黑点的存在没有意义</li>
<li>一个双联通分量上放置两个及以上黑点没有意义<br>这样题目就转化成了选择一些双连通分量，每个双连通分量选一个点。</li>
</ul>
<p>如果一个双连通分量有两个及以上割点的话，没有必要放置黑点，因为总能有一条路通向别的双连通分量。</p>
<p>这样题目就转化成了求有多少只有一个割点的个双联通分量，选点的时候任意选择非割点的点就行。</p>
<p>特殊情况：整个图是一个双连通分量的时候，选两个点n(n - 1) / 2种选法（n为点数）。</p>
<p><strong>AC代码：</strong></p>
<p>由于不知道点编号是否连续，加了个离散化，可能不加也可以</p>
<p><pre class="lang:c++ decode:true " title="UVA1108 - Mining Your Own Business">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#include&lt;assert.h&gt;</p>
<p>#define FS first</p>
<p>#define SE second</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>typedef long long LL;</p>
<p>const int INF = 0x3f3f3f3f;<br>const double eps = 1e-7;<br>const int MAXN = 50000 + 10;</p>
<p>struct Edge {<br>    int u, v;<br>    Edge(int u = 0, int v = 0) : u(u), v(v) {}<br>} edges[MAXN];</p>
<p>vector&lt;int&gt; G[MAXN], bcc[MAXN];<br>stack&lt;Edge&gt; s;</p>
<p>int pre[MAXN], iscut[MAXN], bccno[MAXN], dfs_clock, bcc_cnt;<br>int num[MAXN];</p>
<p>int b_Serach(int l, int r, int v) {<br>    while(l &lt; r) {<br>        int m = (l + r) &gt;&gt; 1;<br>        if(num[m] == v) return m;<br>        if(num[m] &gt; v) r = m;<br>        else l = m + 1;<br>    }<br>    return -1;<br>}</p>
<p>int dfs(int u, int fa) {<br>    int lowu = pre[u] = ++dfs_clock;<br>    int child = 0;<br>    for(int i = 0 ; i &lt; (int)G[u].size() ; i++) {<br>        int v = G[u][i];<br>        Edge e = Edge(u, v);<br>        if(!pre[v]) {<br>            s.push(e);<br>            child++;<br>            int lowv = dfs(v, u);<br>            lowu = min(lowu, lowv);<br>            if(lowv &gt;= pre[u]) {<br>                iscut[u] = true;<br>                bcc_cnt++; bcc[bcc_cnt].clear();<br>                for(;;) {<br>                    Edge x = s.top(); s.pop();<br>                    if(bccno[x.u] != bcc_cnt) {<br>                        bcc[bcc_cnt].push_back(x.u);<br>                        bccno[x.u] = bcc_cnt;<br>                    }<br>                    if(bccno[x.v] != bcc_cnt) {<br>                        bcc[bcc_cnt].push_back(x.v);<br>                        bccno[x.v] = bcc_cnt;<br>                    }<br>                    if(x.u == u &amp;&amp; x.v == v) break;<br>                }<br>            }<br>        }<br>        else if(pre[v] &lt; pre[u] &amp;&amp; v != fa) {<br>            s.push(e);<br>            lowu = min(lowu, pre[v]);<br>        }<br>    }<br>    if(fa &lt; 0 &amp;&amp; child == 1) iscut[u] = 0;<br>    return lowu;<br>}</p>
<p>void find_bcc(int n) {<br>    memset(pre, 0, sizeof pre);<br>    memset(iscut, 0, sizeof iscut);<br>    memset(bccno, 0, sizeof bccno);<br>    dfs_clock = bcc_cnt = 0;<br>    for(int i = 0 ; i &lt; n ; i++) {<br>        if(!pre[i]) dfs(i, -1);<br>    }<br>}</p>
<p>int main() {<br>    int n;<br>    int cases = 1;<br>    while(scanf(“%d”, &amp;n) == 1 &amp;&amp; n) {<br>        for(int i = 0 ; i &lt; n + 1 ; i++) G[i].clear();<br>        int cnt = 0;<br>        for(int i = 0 ; i &lt; n ; i++) {<br>            scanf(“%d%d”, &amp;edges[i].u, &amp;edges[i].v);<br>            num[cnt++] = edges[i].u;<br>            num[cnt++] = edges[i].v;<br>        }<br>        sort(num, num + cnt);<br>        cnt = unique(num, num + cnt) - num;<br>        for(int i = 0 ; i &lt; n ; i++) {<br>            edges[i].u = b_Serach(0, cnt, edges[i].u);<br>            edges[i].v = b_Serach(0, cnt, edges[i].v);<br>            G[edges[i].u].push_back(edges[i].v);<br>            G[edges[i].v].push_back(edges[i].u);<br>        }<br>        find_bcc(n);</p>
<pre><code>    LL ans = 0, ansnum = 1;
    if(bcc_cnt == 1) {
        ansnum = LL(cnt) * LL(cnt - 1) / 2LL;
        ans = 2;
    }
    else {
        for(int i = 1 ; i &amp;lt;= bcc_cnt ; i++) {
            int tmp = 0;
            for(int j = 0 ; j &amp;lt; (int)bcc[i].size() ; j++)
                if(iscut[bcc[i][j]]) tmp++;
            if(tmp == 1) {
                ans++;
                ansnum *= LL(bcc[i].size()) - 1;
            }
        }
    }
    printf(&quot;Case %d: %lld %lld\n&quot;, cases++, ans, ansnum);
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">Donglin</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">87</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">47</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Donglin</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
