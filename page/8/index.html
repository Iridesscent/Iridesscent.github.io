<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Donglin&#39;s Blog">
<meta property="og:url" content="http://iridescent.com.cn/page/8/index.html">
<meta property="og:site_name" content="Donglin&#39;s Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Donglin&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://iridescent.com.cn/page/8/"/>





  <title>Donglin's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Donglin's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/24/uva1449-dominating-patternsac-e8-87-aa-e5-8a-a8-e6-9c-ba/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/24/uva1449-dominating-patternsac-e8-87-aa-e5-8a-a8-e6-9c-ba/" itemprop="url">UVA1449 - Dominating Patterns(AC自动机)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-24T17:44:48+08:00">
                2016-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=505&amp;page=show_problem&amp;problem=4195" target="_blank" rel="noopener">UVA1449 - Dominating Patterns</a></p>
<p><strong>题目大意：</strong>给出n个模板串，求哪个模板串在目标串里出现次数最多</p>
<p><strong>解题思路：</strong>AC自动机模板题，输入期间输出顺序错误wa了一次。</p>
<p><a href="https://iridescent.com.cn/index.php/125.html">Aho-Corasick automation（AC自动机）</a></p>
<p><strong>AC代码：</strong></p>
<p><pre class="lang:c++ decode:true " title="UVA1449 - Dominating Patterns">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>typedef long long LL;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN1 = 150 * 70 + 10;<br>const int MAXN2 = 1000000 + 10;<br>const double eps = 1e-7;</p>
<p>char input[160][80];<br>int ans[160];</p>
<p>struct Tire {<br>    int next[MAXN1][26], fail[MAXN1], end[MAXN1];<br>    int dep[MAXN1];<br>    char str[80];<br>    map&lt;int, int&gt; con;<br>    int root, L;<br>    int ma, pos;<br>    int newnode() {<br>        for(int i = 0 ; i &lt; 26 ; i++)<br>            next[L][i] = -1;<br>        end[L++] = 0;<br>        return L - 1;<br>    }<br>    void init() {<br>        ma = 0;<br>        L = 0;<br>        root = newnode();<br>        memset(dep, 0, sizeof dep);<br>        con.clear();<br>    }<br>    void insert(char buf[]) {<br>        int len = strlen(buf);<br>        int now = root;<br>        for(int i = 0 ; i &lt; len ; i++) {<br>            if(next[now][buf[i] - ‘a’] == -1) {<br>                next[now][buf[i] - ‘a’] = newnode();<br>                dep[next[now][buf[i] - ‘a’]] = i + 1;<br>            }<br>            now = next[now][buf[i] - ‘a’];<br>        }<br>        end[now]++;<br>    }<br>    void build() {<br>        queue&lt;int&gt; Q;<br>        fail[root] = root;<br>        for(int i = 0 ; i &lt; 26 ; i++) {<br>            if(next[root][i] == -1)<br>                next[root][i] = root;<br>            else  {<br>                fail[next[root][i]] = root;<br>                Q.push(next[root][i]);<br>            }<br>        }<br>        while(!Q.empty()) {<br>            int now = Q.front();<br>            Q.pop();<br>            for(int i = 0 ; i &lt; 26 ; i++) {<br>                if(next[now][i] == -1)<br>                    next[now][i] = next[fail[now]][i];<br>                else {<br>                    fail[next[now][i]] = next[fail[now]][i];<br>                    Q.push(next[now][i]);<br>                }<br>            }<br>        }<br>    }</p>
<pre><code>int dfs(int id, int cnt, int en) {
    if(en == id) return cnt;
    for(int i = 0 ; i &amp;lt; 26 ; i++) {
        if(next[id][i] &amp;gt; 0 &amp;amp;&amp;amp; dep[next[id][i]] &amp;gt; dep[id]) {
            str[cnt] = &apos;a&apos; + i;
            int len = dfs(next[id][i], cnt + 1, en);
            if(len) return len;
        }
    }
    return 0;
}

void slove(int id, int num) {
    con[id] += num;
}

int query(char buf[]) {
    int len = strlen(buf);
    int now = root;
    int res = 0;
    for(int i = 0 ; i &amp;lt; len ; i++) {
        now = next[now][buf[i] - &apos;a&apos;];
        int temp = now;
        while(temp != root) {
            res += end[temp];
            if(end[temp])
                slove(temp, end[temp]);
            temp = fail[temp];
        }
    }
    return res;
}
</code></pre><p>} ac;<br>char s[MAXN2];</p>
<p>int main() {<br>    int n;<br>    while(scanf(“%d”, &amp;n) == 1 &amp;&amp; n) {<br>        ac.init();<br>        memset(ans, 0, sizeof ans);<br>        for(int i = 0 ; i &lt; n ; i++) {<br>            scanf(“%s”, input[i]);<br>            ac.insert(input[i]);<br>        }<br>        ac.build();<br>        scanf(“%s”, s);<br>        ac.query(s);<br>        int ma = 0;<br>        for(map&lt;int, int&gt;::iterator i = ac.con.begin() ; i != ac.con.end() ; ++i) {<br>            ma = max(ma, i-&gt;second);<br>        }</p>
<pre><code>    printf(&quot;%d\n&quot;, ma);
    for(map&amp;lt;int, int&amp;gt;::iterator i = ac.con.begin() ; i != ac.con.end() ; ++i) {
        if(ma == i-&amp;gt;second) {
            int l = ac.dfs(0, 0, i-&amp;gt;first);
            ac.str[l] = 0;
            for(int i = 0 ; i &amp;lt; n ; i++) {
                if(strcmp(input[i], ac.str) == 0) ans[i] = ma;
            }
        }
    }
    for(int i = 0 ; i &amp;lt; n ; i++) if(ans[i] == ma) printf(&quot;%s\n&quot;, input[i]);
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/24/aho-corasick-automation-ef-bc-88ac-e8-87-aa-e5-8a-a8-e6-9c-ba-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/24/aho-corasick-automation-ef-bc-88ac-e8-87-aa-e5-8a-a8-e6-9c-ba-ef-bc-89/" itemprop="url">Aho-Corasick automation（AC自动机）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-24T14:53:54+08:00">
                2016-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>正在学习AC自动机，贴两个不错的学习素材</p>
<p><a href="http://blog.csdn.net/mobius_strip/article/details/22549517" target="_blank" rel="noopener">AC自动机总结</a></p>
<p><a href="https://iridescent.com.cn/Reference/Aho-Corasick automation.pdf">Biosequence Algorithms, Spring 2005 Lecture 4: Set Matching and Aho-Corasick Algorithm</a></p>
<p>还是有些不太懂，还是太弱啊。。。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/23/uva1328-periodkmp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/23/uva1328-periodkmp/" itemprop="url">UVA1328 - Period(KMP)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-23T15:17:07+08:00">
                2016-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=505&amp;problem=4074&amp;mosmsg=Submission+received+with+ID+16890105" target="_blank" rel="noopener">UVA1328 - Period</a></p>
<p><strong>题目大意：</strong>给出一个长度为n的字符串，找出所有的1 &lt;=i&lt;=n使得前i的字符是由某个前缀重复k次得到，并使k最大，并输出所有的i和k。</p>
<p><strong>解题思路：</strong>本来想用类似于筛素数的方法打表过，但是这样判断字符串相等要用LCP，但是本题空间复杂度不允许LCP。</p>
<p>后来想想，KMP算法中的next数组next[i]表示前i个字符前缀后缀的最长相等长度，比如abaa的next[3]=1，因为b两侧的两个a是相同的。</p>
<p>&nbsp;</p>
<p><img src="https://www.iridescent.com.cn/wp-content/uploads/2016/02/UVA1328-Period.png" alt="UVA1328-Period"></p>
<p>图中中间长方形为题目中给出的串的前i个字符组成的字符串，令len(StrA) = len(StrB)=next[i]，这样StrA和StrB就表示相同的前缀后缀，及StrA==StrB。</p>
<p>这样如果i % (i - len(StrA)) == 0就一定存在一个解，且循环节长度最短为i-len(StrA)，也就是一种类似于错位的思想。</p>
<p>这样先计算书next数组，就能在O(n)的时间内解出答案。</p>
<p><strong>AC代码：</strong></p>
<p><pre class="lang:c++ decode:true " title="UVA1328 - Period">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>typedef long long LL;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN = 1000000 + 10;<br>const double eps = 1e-7;</p>
<p>char s[MAXN];<br>int len[MAXN];<br>int F[MAXN];</p>
<p>void getFail(char <em>P, int </em>f) {<br>    int m = strlen(P);<br>    f[0] = 0;<br>    f[1] = 0;<br>    for(int i = 1 ; i &lt; m ; i++) {<br>        int j = f[i];<br>        while(j &amp;&amp; P[i] != P[j]) j = f[j];<br>        f[i + 1] = P[i] == P[j]?j + 1:0;<br>    }<br>}</p>
<p>int main() {<br>    int n;<br>    int ca(1);<br>    while(scanf(“%d”, &amp;n) == 1 &amp;&amp; n) {<br>        scanf(“%s”, s);<br>        getFail(s, F);<br>        printf(“Test case #%d\n”, ca++);<br>        for(int i = 2 ; i &lt;= n ; i++) {<br>            if(F[i] &amp;&amp; i % (i - F[i]) == 0) {<br>                printf(“%d %d\n”, i, i / (i - F[i]));<br>            }<br>        }<br>        printf(“\n”);<br>    }<br>    return 0;<br>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/22/e6-90-ad-e5-bb-baonlinejudge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/22/e6-90-ad-e5-bb-baonlinejudge/" itemprop="url">搭建OnlineJudge</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-22T16:30:57+08:00">
                2016-02-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OnlineJudge/" itemprop="url" rel="index">
                    <span itemprop="name">OnlineJudge</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>基于青岛大学开源oj项目 <a href="https://github.com/QingdaoU/OnlineJudge" target="_blank" rel="noopener">qdu oj</a></p>
<p>做到了 “配置 docker-compose” 发现后面的docker要花时间了解一下。</p>
<p>最近先刷题吧，留个flag，回头有空再搞</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/20/gym-100803g-e7-ba-bf-e6-ae-b5-e6-a0-91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/20/gym-100803g-e7-ba-bf-e6-ae-b5-e6-a0-91/" itemprop="url">Gym 100803G 线段树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-20T22:53:31+08:00">
                2016-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>好长时间前做的题，来补一下题解。</p>
<p>给出括号化的序列，每次改变一个括号方向，求出下标p，是的改变p处的括号方向可以使括号化仍然成立，且p最小。</p>
<p>保证括号化看似和线段树没有联系，我们可以把括号”(“表示为1，把括号”)”表示为-1，则保证括号化的充要条件就是使数字序列前缀和始终大于等于零</p>
<p>用线段树维护前缀和</p>
<p>查询有两种情况</p>
<ul>
<li>“(“ 变成 “)”  这种情况我们只需找到最左边的一个”)”，就是答案。(可以用一个set维护所有的”)”的位置)</li>
<li>“)” 变成 “(“ 这种情况我们要找一个最左边的“（”变成”）“，也就是把p处及以后的前缀和都减2，且不能出现负的前缀和。<br>于是我们就要借助线段树查询前缀和小于2的最右边节点，这样把区间[p + 1, n]减二之后才不会出现负值。</li>
</ul>
<p>用线段树维护区间最小值，也就是区间最小前缀和。线段树能往右走就往又走，注意查询过程中区间边界的特判处理。</p>
<p><pre class="lang:c++ decode:true " title="Gym 100803G 线段树">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;iostream&gt;</p>
<p>#define lson o &lt;&lt; 1, L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R<br>using namespace std;<br>const int MAXN = 300010;<br>const int INF = 0x3f3f3f3f;<br>char str[MAXN];<br>int num[MAXN];<br>int minv[MAXN &lt;&lt; 2];<br>int addv[MAXN &lt;&lt; 2];<br>int len;<br>void pushup(int o, int L, int R) {<br>    minv[o] = 0;<br>    if(R &gt; L) {<br>        minv[o] = min(minv[o &lt;&lt; 1], minv[(o &lt;&lt; 1) | 1]);<br>    }<br>    minv[o] += addv[o];<br>}<br>void update(int p, int v, int o, int L, int R) {<br>    if(p == L &amp;&amp; p == R) {<br>        addv[o] = v;<br>        minv[o] = 0;<br>    } else {<br>        int M = L + (R - L) / 2;<br>        if(p &lt;= M) update(p, v, lson);<br>        else update(p, v, rson);</p>
<pre><code>}pushup(o, L, R);
</code></pre><p>}<br>void add(int l, int r, int v, int o, int L, int R) {<br>    if(l &lt;= L &amp;&amp; r &gt;= R) {<br>        addv[o] += v;<br>    } else {<br>        int M = L + (R - L) / 2;<br>        if(l &lt;= M)add(l, r, v, lson);<br>        if(r &gt; M) add(l, r, v, rson);<br>    }<br>    pushup(o, L, R);<br>}<br>int query_min(int l ,int r, int add, int o, int L, int R) {<br>    if(l &lt;= L &amp;&amp; r &gt;= R) {<br>        return minv[o] + add;<br>    } else {<br>        int M = L + (R - L) / 2;<br>        int res = INF;<br>        if(l &lt;= M) res = min(res, query_min(l, r, add + addv[o],lson));<br>        if(r &gt; M) res = min(res, query_min(l, r, add + addv[o], rson));<br>        return res;<br>    }<br>}<br>int query(int l, int r, int add, int o, int L, int R) { //cout &lt;&lt; L &lt;&lt; “!!!” &lt;&lt; R &lt;&lt; endl;<br>    if(L == R) {<br>        if(L == 1) {<br>            if(minv[o] + add &gt;= 2) return 0;<br>            return L;<br>        } else {<br>            return L;<br>        }<br>    }<br>    int M = L + (R - L) / 2;<br>    if(r &lt; M + 1) return query(l, r, add + addv[o], lson);<br>    int minr = query_min(M + 1, min(r, R), 0, 1, 1, len);<br>    if(minr &lt; 2) return query(l, r, add + addv[o], rson);<br>    return query(l, r, add + addv[o], lson);<br>}<br>int main() {<br>    int n, q; set&lt;int&gt; fir;<br>    scanf(“%d%d”, &amp;n, &amp;q);<br>    scanf(“%s”, str + 1);<br>    len = n;<br>    for(int i = 1 ; i &lt;= len ; i++)<br>        if(str[i] == ‘(‘) num[i] = 1;<br>        else {<br>            num[i] = -1;<br>            fir.insert(i);<br>        }<br>    for(int i = 1 ; i &lt;= len ; i++) num[i] += num[i - 1];<br>    for(int i = 1 ; i &lt;= len ; i++) update(i, num[i], 1, 1, len);<br>    //cout &lt;&lt; query_min(1, 1, 0, 1, 1, len) &lt;&lt; “!!” &lt;&lt; endl;<br>    for(int i = 0 ; i &lt; q ; i++) {<br>        //cout &lt;&lt; str + 1 &lt;&lt; endl;<br>        int pos; scanf(“%d”, &amp;pos);<br>        if(str[pos] == ‘(‘) {<br>            str[pos] = ‘)’;<br>            fir.insert(pos);<br>            int pp = *fir.begin();<br>            fir.erase(fir.begin());<br>            add(pos, len, -2, 1, 1, len);<br>            add(pp, len, 2, 1, 1, len);<br>            printf(“%d\n”, pp);<br>            str[pp] = ‘(‘;<br>        } else { // str[pos] == ‘)’<br>            str[pos] = ‘(‘;<br>            add(pos, len, 2, 1, 1, len);<br>            fir.erase(pos);<br>            int pp = query(1, pos, 0, 1, 1, len);<br>            //cout &lt;&lt; pp &lt;&lt; “~~” &lt;&lt; endl;<br>            pp++;<br>            str[pp] = ‘)’;<br>            fir.insert(pp);<br>            add(pp, len, -2, 1, 1, len);<br>            printf(“%d\n”, pp);<br>        }<br>    }<br>    return 0;<br>}<br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/20/uva1160-x-plosives-ef-bc-88-e5-b9-b6-e6-9f-a5-e9-9b-86-ef-bc-8c-e5-a5-bd-e9-a2-98-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/20/uva1160-x-plosives-ef-bc-88-e5-b9-b6-e6-9f-a5-e9-9b-86-ef-bc-8c-e5-a5-bd-e9-a2-98-ef-bc-89/" itemprop="url">UVA1160 - X-Plosives（并查集，好题）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-20T18:46:05+08:00">
                2016-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：<a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=497&amp;problem=3601&amp;mosmsg=Submission+received+with+ID+16876020" target="_blank" rel="noopener">http://UVA1160 - X-Plosives</a></strong></p>
<p><strong>题目大意：</strong>给出一个化学品装车序列，每个化学品由两种元素组成，如果车内存在一个化学品数大于2的组合，化学品数等于元素数就会爆炸，如果一个化学品装车会引起爆炸你就要拒绝装车，问要拒绝装车多少次</p>
<p><strong>解题思路：</strong>把元素看做点，化学品看成两点间的边，化学品爆炸就等价于无向图里产生了环，用并查集可解。</p>
<p><strong>AC代码：</strong></p>
<p><pre class="lang:c# decode:true " title="UVA1160 - X-Plosives">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN = 100010;<br>const double eps = 1e-7;</p>
<p>int fa[MAXN];</p>
<p>int find(int p) {<br>    if(fa[p] == p) return p;<br>    return fa[p] = find(fa[p]);<br>}</p>
<p>int main() {<br>    int a, b;<br>    while(scanf(“%d%d”, &amp;a, &amp;b) == 2) {<br>        for(int i = 0 ; i &lt; MAXN ; i++) fa[i] = i;<br>        int cnt = 0;<br>        fa[a] = b;<br>        while(scanf(“%d”, &amp;a) == 1) {<br>            if(a == -1) break;<br>            scanf(“%d”, &amp;b);<br>            int u = find(a);<br>            int v = find(b);<br>            if(u == v) cnt++;<br>            else fa[u] = v;<br>        }<br>        printf(“%d\n”, cnt);<br>    }<br>    return 0;<br>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/20/uva11997-k-smallest-sums/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/20/uva11997-k-smallest-sums/" itemprop="url">UVA11997 - K Smallest Sums（多路归并）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-20T17:29:59+08:00">
                2016-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=497&amp;page=show_problem&amp;problem=3148" target="_blank" rel="noopener">UVA11997 - K Smallest Sums</a></p>
<p><strong>题目大意：</strong>给出n*n的矩阵，每行选取一个数做和，就能产生n<sup>n</sup>个和，从中选取n个最小的输出。</p>
<p><strong>解题思路：</strong>这是一个n路归并问题，相当于进行n-1次两两归并。那么怎么进行两两归并呢？</p>
<p>两两归并：对与数列{A<sub>1</sub>, A<sub>2</sub>, … , A<sub>n</sub>}和{B<sub>1</sub>, B<sub>2</sub>, … , B<sub>n</sub>}可得矩阵</p>
<p>A<sub>1</sub>+B<sub>1</sub>&lt;=A<sub>1</sub>+B<sub>2</sub>&lt;= … &lt;= A<sub>1</sub>+B<sub>n</sub></p>
<p>A<sub>2</sub>+B<sub>1</sub>&lt;=A<sub>2</sub>+B<sub>2</sub>&lt;= … &lt;= A<sub>2</sub>+B<sub>n</sub></p>
<p>…</p>
<p>A<sub>n</sub>+B<sub>1</sub>&lt;=A<sub>n</sub>+B<sub>2</sub>&lt;= … &lt;= A<sub>n</sub>+B<sub>n</sub></p>
<p>我们可以将用一个结构体存储第一列元素和各自的列坐标，放入优先队列中，每次取最小的，令其列坐标加1并计算出新的数值放回优先队列中，这样取n次就完成了两两归并。代码见下文merge函数</p>
<p>解决了两两归并问题，将原题n个数列归并n - 1次，就得到了答案</p>
<p><strong>AC代码：</strong></p>
<p><pre class="lang:c++ decode:true " title="UVA11997 - K Smallest Sums">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;stack&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN = 800;<br>const double eps = 1e-7;</p>
<p>int num[MAXN][MAXN];</p>
<p>struct Item {<br>    int num, id;<br>    Item(int num, int id) : num(num), id(id) {}<br>    bool operator &lt; (const Item&amp; t) const {<br>        return num &gt; t.num;<br>    }<br>};</p>
<p>void merge(int <em>A, int </em>B, int *C, int n) {<br>    priority_queue&lt;Item&gt; que;<br>    for(int i = 0 ; i &lt; n ; i++)<br>        que.push(Item(A[i] + B[0], 0));<br>    for(int cnt = 0 ; cnt &lt; n ; cnt++) {<br>        Item tmp = que.top();<br>        que.pop();<br>        C[cnt] = tmp.num;<br>        tmp.num = tmp.num - B[tmp.id] + B[tmp.id + 1];<br>        tmp.id++;<br>        que.push(tmp);<br>    }<br>}</p>
<p>int main() {<br>    int n;<br>    while(scanf(“%d”, &amp;n) == 1) {<br>        for(int i = 0 ; i &lt; n ; i++) {<br>            for(int j = 0 ; j &lt; n ; j++)<br>                scanf(“%d”, &amp;num[i][j]);<br>            sort(num[i], num[i] + n);<br>        }</p>
<pre><code>    for(int i = 1 ; i &amp;lt; n ; i++) {
        merge(num[0], num[i], num[0], n);
    }

    for(int i = 0 ; i &amp;lt; n ; i++)
        if(i == n - 1) printf(&quot;%d\n&quot;, num[0][i]);
        else printf(&quot;%d &quot;, num[0][i]);
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/20/apache-e9-85-8d-e7-bd-aessl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/20/apache-e9-85-8d-e7-bd-aessl/" itemprop="url">apache配置ssl</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-20T00:55:15+08:00">
                2016-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>没有黑的意思，不过百度到的配置方式确实太辣鸡了，似懂非懂的帖来帖去。</p>
<p>贴两个英文文档，写的非常专业全面。</p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-ssl-certificate-on-apache-for-ubuntu-14-04" target="_blank" rel="noopener">How To Create a SSL Certificate on Apache for Ubuntu 14.04</a></li>
<li><a href="https://konklone.com/post/switch-to-https-now-for-free" target="_blank" rel="noopener">Switch to HTTPS Now, For Free</a><br>按照第一个配置完了以后就可以用https访问了，但是用的是使自己生成的证书，浏览器会提示证书不安全。</li>
</ul>
<p>这时候吧crt文件和key文件换乘第二个文档里生成的就行了</p>
<p>但是这时之前安装好的wordpress会有外链问题</p>
<p>进一步可以配置一下wordpress，使之支持https</p>
<p><a href="http://www.wpbeginner.com/wp-tutorials/how-to-add-ssl-and-https-in-wordpress/" target="_blank" rel="noopener">How to Add SSL and HTTPS in WordPress</a></p>
<p>期间如果浏览器显示的界面没反应可以清除一下cookie</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/19/uva10859-placing-lampposts-ef-bc-88-e6-a0-91-e5-bd-a2dp-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/19/uva10859-placing-lampposts-ef-bc-88-e6-a0-91-e5-bd-a2dp-ef-bc-89/" itemprop="url">UVA10859 - Placing Lampposts（树形dp）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-19T17:17:32+08:00">
                2016-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=464&amp;problem=1800&amp;mosmsg=Submission+received+with+ID+16870685" target="_blank" rel="noopener">UVA10859 - Placing Lampposts</a></p>
<p><strong>题目大意：</strong>给出一个无向无环图，要求选取尽量少的点建立路灯，要求用最少的路灯着凉所有的点，并且在点最少的情况下使尽量多的道路被两个路灯照亮。</p>
<p><strong>解题思路：</strong></p>
<ul>
<li>树上的最优化问题，可用动态规划解决，对于每个点都有建立路灯和不建立路灯两种决策。</li>
<li>对于不同的联通块独立解决，任选一个作为树根，形成一个dfs树</li>
<li>设计最优化函数，我用的建立路灯数<em>1500+被一个路灯照亮的道路数</em>1，则该数值越小越优<br>dp0(i)表示以i作为树根，且i点不建立路灯的最优解，dp1(i)表示以i作为树根，且i点建立路灯的最优解</li>
</ul>
<p>则状态转移可以表示为</p>
<p>dp0(i) = 1 + ∑dp1(j) (j为1的子节点)</p>
<p>dp1(i) = ∑min(dp1(j), dp0(j) + 1) (j为i的子节点)</p>
<p>最优化函数值为∑min(dp0(i), dp1(i))  i为各联通块的根节点，可以进一步得出答案</p>
<p><strong>AC代码：</strong></p>
<p><pre class="lang:c++ decode:true " title="UVA10859 - Placing Lampposts">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#include&lt;assert.h&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN = 1010;<br>const int MAGIC = 1500;<br>const double eps = 1e-7;</p>
<p>vector&lt;int&gt; G[MAXN];<br>int dp1[MAXN];<br>int dp0[MAXN];<br>bool vis[MAXN];<br>int DP0(int root, int fa);<br>int DP1(int root, int fa);</p>
<p>int DP0(int root, int fa) {<br>    if(dp0[root] != INF) return dp0[root];</p>
<pre><code>if(G[root].size() == 0) return dp0[root] = 0;
if(G[root].size() == 1 &amp;amp;&amp;amp; G[root][0] == fa) return dp0[root] = 0;

int res = 0;
for(int i = 0 ; i &amp;lt; (int)G[root].size() ; ++i)
    if(G[root][i] != fa)
        res += (DP1(G[root][i], root) + 1);
return dp0[root] = res;
</code></pre><p>}</p>
<p>int DP1(int root, int fa) {<br>    if(dp1[root] != INF) return dp1[root];</p>
<pre><code>if(G[root].size() == 0) return dp1[root] = 0;
if(G[root].size() == 1 &amp;amp;&amp;amp; G[root][0] == fa) return dp1[root] = MAGIC;

int res = 0;
for(int i = 0 ; i &amp;lt; (int)G[root].size() ; ++i) {
    if(G[root][i] != fa)
        res += min(DP1(G[root][i], root), DP0(G[root][i], root) + 1);
}
return dp1[root] = (res + MAGIC);
</code></pre><p>}</p>
<p>void dfs(int root) {<br>    vis[root] = true;<br>    for(int i = 0 ; i &lt; (int)G[root].size() ; ++i)<br>        if(!vis[G[root][i]]) dfs(G[root][i]);<br>}<br>// 以root为树根评分的最小值<br>int slove(int root) {<br>    dfs(root);<br>    return min(DP0(root, -1), DP1(root, -1));<br>}</p>
<p>int main() {<br>    //freopen(“in.txt”, “r”, stdin);<br>    //freopen(“out.txt”, “w”, stdout);</p>
<pre><code>int T;
scanf(&quot;%d&quot;, &amp;amp;T);
while(T--) {
    int n, m;
    scanf(&quot;%d%d&quot;, &amp;amp;n, &amp;amp;m);
    for(int i = 0 ; i &amp;lt; MAXN ; i++) G[i].clear();
    memset(dp1, 0x3f, sizeof dp1);
    memset(dp0, 0x3f, sizeof dp0);
    memset(vis, false, sizeof vis);

    for(int i = 0 ; i &amp;lt; m ; i++) {
        int u, v;
        scanf(&quot;%d%d&quot;, &amp;amp;u, &amp;amp;v);
        G[u].push_back(v);
        G[v].push_back(u);
    }

    int ans = 0;
    for(int i = 0 ; i &amp;lt; n ; i++)
        if(!vis[i]) {
            ans += slove(i);
        }
    printf(&quot;%d %d %d\n&quot;, ans / MAGIC, m - (ans %  MAGIC), ans % MAGIC);

}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iridescent.com.cn/2016/02/19/uva11825-hackers-crackdown-ef-bc-88-e7-8a-b6-e5-8e-8bdp-ef-bc-89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Donglin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Donglin's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/19/uva11825-hackers-crackdown-ef-bc-88-e7-8a-b6-e5-8e-8bdp-ef-bc-89/" itemprop="url">UVA11825 - Hackers' Crackdown（状压dp）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-19T15:12:52+08:00">
                2016-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>题目链接：</strong><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=464&amp;problem=2925&amp;mosmsg=Submission+received+with+ID+16870101" target="_blank" rel="noopener">UVA11825 - Hackers’ Crackdown</a></p>
<p><strong>题目大意：</strong>给出n台电脑，一共有n种服务，每台电脑上都运行着所有的服务，给出电脑之间的联通情况，在每台电脑上可以选择一种服务，则这台电脑及和这台电脑<strong>直接/间接</strong>相连的电脑该服务都会停止。问：最多停止多少服务（没有任何电脑运行一个服务，则该服务停止）</p>
<p><strong>解题思路：</strong></p>
<ul>
<li>不同服务之间是等价的，所以我们可以只考虑服务数量，不关心具体那个服务</li>
<li>要停止一项服务，就要选择x台电脑，使这x太电脑可以覆盖到所有电脑，且x应尽可能小（这样才能停止更多的服务），在这x台选中的电脑上都停止该服务。</li>
<li>每一个服务都应该有一个数量尽量少的并且能覆盖所有电脑的电脑集合S停止<br>这样题目就转化成了，将所有电脑的全集S划分成尽可能多的子集{S<sub>1</sub>, S<sub>2</sub>, …. ,S<sub>n</sub>}，并且所有的子集都要覆盖全部电脑，划分数即为答案</li>
</ul>
<p>则状态转移方程为</p>
<p><pre class="lang:default decode:true ">dp[S] = max{dp[S], dp[S - S0] + 1}</pre><br>S0为S的子集，且S0可以覆盖所有电脑，S-S0代表差集</p>
<p>&nbsp;</p>
<p>小技巧：枚举S的子集S0</p>
<p><pre class="lang:c++ decode:true">for(int S0 = S ; S ; S0 = (S0 - 1) &amp; S)</pre><br><strong>AC代码：</strong></p>
<p><pre class="lang:c++ decode:true " title="11825 - Hackers' Crackdown">#include&lt;cstdio&gt;</pre></p>
<p>#include&lt;iostream&gt;</p>
<p>#include&lt;cstring&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;algorithm&gt;</p>
<p>#include&lt;vector&gt;</p>
<p>#include&lt;string&gt;</p>
<p>#include&lt;set&gt;</p>
<p>#include&lt;map&gt;</p>
<p>#include&lt;queue&gt;</p>
<p>#include&lt;cmath&gt;</p>
<p>#include&lt;cstdlib&gt;</p>
<p>#include&lt;assert.h&gt;</p>
<p>#define lson (o &lt;&lt; 1), L, M</p>
<p>#define rson (o &lt;&lt; 1) | 1, M + 1, R</p>
<p>using namespace std;</p>
<p>const int INF = 0x3f3f3f3f;<br>const int MAXN = 17;<br>const double eps = 1e-7;</p>
<p>int G[MAXN];<br>int Covers[1 &lt;&lt; MAXN];<br>int dp[1 &lt;&lt; MAXN];</p>
<p>int main() {<br>    //freopen(“in.txt”, “r”, stdin);<br>    //freopen(“out.txt”, “w”, stdout);</p>
<pre><code>int n;
int cases(1);
while(scanf(&quot;%d&quot;, &amp;amp;n) == 1 &amp;amp;&amp;amp; n) {
    for(int i = 0 ; i &amp;lt; n ; i++) G[i] = (1 &amp;lt;&amp;lt; i);
    memset(dp, 0, sizeof dp);
    for(int i = 0 ; i &amp;lt; n ; i++) {
        int m;
        scanf(&quot;%d&quot;, &amp;amp;m);
        for(int j = 0 ; j &amp;lt; m ; j++) {
            int t;
            scanf(&quot;%d&quot;, &amp;amp;t);
            G[i] |= (1 &amp;lt;&amp;lt; t);
        }
    }

    for(int mask = 1 ; mask &amp;lt; (1 &amp;lt;&amp;lt; n) ; mask++) {
        int S = 0;
        for(int i = 0 ; i &amp;lt; n ; i++)
            if(mask &amp;amp; (1 &amp;lt;&amp;lt; i)) S |= G[i];
        Covers[mask] = S;
    }

    int ALL = (1 &amp;lt;&amp;lt; n) - 1;
    for(int mask = 1 ; mask &amp;lt; (1 &amp;lt;&amp;lt; n) ; mask++) {
        if(Covers[mask] == ALL) dp[mask] = 1;

        for(int S = mask ; S ; S = (S - 1) &amp;amp; mask)
            if(Covers[S] == ALL) dp[mask] = max(dp[mask], dp[mask ^ S] + 1);
        //printf(&quot;%d!!\n&quot;, dp[mask]);
    }

    printf(&quot;Case %d: %d\n&quot;, cases++, dp[ALL]);
}
return 0;
</code></pre><p>}<br><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">Donglin</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">87</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">47</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Donglin</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
